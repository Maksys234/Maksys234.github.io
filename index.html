<!DOCTYPE html>
<html lang="cs" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JUSTAX | AI Kyber Augmentace pro Zkoušky</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* --- Палитра и Переменные (v17 - Cyber Core Enhanced) --- */
        :root {
            /* Основа */
            --bg-color: #050410;            /* Глубокий космос */
            --bg-secondary: #0d0a24;       /* Темный индиго */
            --card-bg: rgba(18, 12, 50, 0.8);  /* Полупрозрачный темный фиолетовый, чуть прозрачнее */
            --card-solid: #120c32;         /* Сплошной фиолетовый */
            --interface-bg: rgba(8, 5, 26, 0.9); /* Фон интерфейса, почти непрозрачный */
            --interface-border: rgba(0, 240, 255, 0.3); /* Циановая рамка интерфейса */
            --dark-purple-accent: #1a104a; /* Темный фиолетовый для градиентов */

            /* Акценты - Циан основной, Фиолетовый/Розовый вторичные */
            --accent-primary: #00e0ff;     /* Циан (Яркий голубой) */
            --accent-primary-rgb: 0, 224, 255;
            --accent-secondary: #a05cff;   /* Фиолетовый */
            --accent-secondary-rgb: 160, 92, 255;
            --accent-pink: #ff33a8;        /* Розовый */
            --accent-pink-rgb: 255, 51, 168;
            --accent-lime: #6fff3a;        /* Лайм (для галочек) */
            --accent-lime-rgb: 111, 255, 58;
            --accent-cyan: var(--accent-primary); /* Синоним для ясности */
            --accent-cyan-rgb: var(--accent-primary-rgb);
            --accent-cyan-glow: rgba(var(--accent-cyan-rgb), 0.5);
            --accent-glow: rgba(var(--accent-primary-rgb), 0.5); /* Сильное Циановое свечение */
            --accent-secondary-glow: rgba(var(--accent-secondary-rgb), 0.4);
            --accent-pink-glow: rgba(var(--accent-pink-rgb), 0.3);
            --accent-border-glow: rgba(var(--accent-primary-rgb), 0.7);

            /* Текст */
            --text-light: #f0f4f8;          /* Почти белый */
            --text-medium: #c0c8e0;         /* Светло-серый/голубой */
            --text-muted: #8892b0;          /* Приглушенный */
            --text-heading: #ffffff;        /* БЕЛЫЙ для заголовков */
            --text-link: var(--accent-primary);
            --text-link-hover: #ffffff;
            --text-fixed-dark: #050410;     /* Для текста на светлых кнопках при ховере */
            --white: #ffffff;

            /* Границы */
            --border-color-light: rgba(var(--accent-secondary-rgb), 0.2);
            --border-color-medium: rgba(var(--accent-secondary-rgb), 0.4);
            --border-color-strong: rgba(var(--accent-primary-rgb), 0.6); /* Ярче циан */
            --border-interactive: var(--accent-primary);
            --border-glow-gradient: linear-gradient(90deg, transparent, var(--accent-primary), var(--accent-pink), var(--accent-primary), transparent); /* Градиент для границ ховера */

            /* Градиенты */
            --gradient-header: linear-gradient(180deg, rgba(5, 4, 16, 0.95) 0%, rgba(5, 4, 16, 0.8) 100%);
            --gradient-border-anim: linear-gradient(90deg, var(--accent-secondary), var(--accent-primary), var(--accent-pink), var(--accent-primary), var(--accent-secondary));
            --gradient-button: linear-gradient(100deg, var(--accent-secondary) 0%, var(--accent-primary) 100%);
            --gradient-button-hover: linear-gradient(100deg, var(--accent-primary) 0%, var(--accent-pink) 100%);
            --gradient-hero-bg: radial-gradient(ellipse at 10% 10%, rgba(var(--accent-primary-rgb), 0.15), transparent 50%),
                                 radial-gradient(ellipse at 90% 90%, rgba(var(--accent-secondary-rgb), 0.12), transparent 55%),
                                 var(--bg-color);
            --gradient-card-highlight: linear-gradient(160deg, rgba(var(--accent-primary-rgb), 0.12), rgba(var(--accent-secondary-rgb), 0.1));
            --gradient-cta: linear-gradient(110deg, var(--accent-secondary) 0%, var(--accent-pink) 100%); /* Розово-фиолетовый для CTA */

            /* Шрифты */
            --font-primary: 'Inter', sans-serif;
            --font-secondary: 'Poppins', sans-serif; /* Для заголовков и кнопок */
            --font-mono: 'Roboto Mono', monospace; /* Для интерфейса ИИ */

            /* Тени */
            --shadow-glow: 0 0 20px var(--accent-glow);
            --shadow-card: 0 10px 35px rgba(0, 0, 0, 0.35); /* Глубже */
            --shadow-interactive: 0 6px 18px rgba(var(--accent-primary-rgb), 0.35); /* Заметнее */
            --shadow-interactive-hover: 0 8px 25px rgba(var(--accent-pink-rgb), 0.4); /* Розовый ховер */
            --shadow-card-hover-enhanced: 0 15px 45px rgba(0, 0, 0, 0.4), 0 0 25px var(--accent-glow), inset 0 0 10px rgba(var(--accent-primary-rgb), 0.1); /* Усиленная тень для ховера карточек */

            /* Размеры и переходы */
            --card-radius: 12px;
            --btn-radius: 8px;
            --section-padding-y: clamp(6.5rem, 13vh, 9.5rem); /* Чуть больше */
            --container-width: 1450px; /* Шире */
            --transition-fast: all 0.2s ease-out;
            --transition-medium: all 0.35s ease-out;
            --transition-long: all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
            --transition-bounce: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Пружинистая анимация */
        }

        /* --- Базовые стили --- */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; font-size: 16px; -webkit-text-size-adjust: 100%; }
        body {
            background-color: var(--bg-color); color: var(--text-medium); /* Базовый цвет текста */
            font-family: var(--font-primary); line-height: 1.7;
            overflow-x: hidden; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
            min-height: 100vh; position: relative; background-attachment: fixed; /* Fixed background */
        }

        /* Animated Grid Background */
        body::before {
            content: ""; position: fixed; inset: 0; width: 100%; height: 100%; z-index: -2;
            background-image:
                linear-gradient(rgba(var(--accent-secondary-rgb), 0.06) 1px, transparent 1px), /* Горизонтальные линии */
                linear-gradient(90deg, rgba(var(--accent-secondary-rgb), 0.06) 1px, transparent 1px); /* Вертикальные линии */
            background-size: 35px 35px; /* Размер ячейки сетки */
            opacity: 0.9;
            animation: bg-grid-pan 90s linear infinite;
        }
        @keyframes bg-grid-pan {
            0% { background-position: 0 0; }
            100% { background-position: 700px 350px; } /* Движение сетки */
        }

        /* Scanline Overlay - NEW */
        body::after {
            content: "";
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            width: 100%; height: 100%;
            z-index: -1; /* Над сеткой, под контентом */
            background: linear-gradient(
                to bottom,
                rgba(18, 16, 32, 0) 50%, /* Цвет фона с прозрачностью */
                rgba(0, 0, 0, 0.15) 50% /* Темная линия */
            );
            background-size: 100% 4px; /* Ширина 100%, высота линии 4px */
            opacity: 0.25; /* Регулируй прозрачность (сделал чуть менее заметной) */
            pointer-events: none;
            animation: scanlines 25s linear infinite;
        }
        @keyframes scanlines {
            from { background-position: 0 0; }
            to { background-position: 0 100px; } /* Скорость движения */
        }

        .container {
             width: 90%; max-width: var(--container-width); margin-left: auto; margin-right: auto; padding-left: 15px; padding-right: 15px;
        }

        /* --- Типография (ГАРАНТИРОВАННО ВИДИМАЯ) --- */
        h1, h2, h3, h4, h5, h6 { font-family: var(--font-secondary); font-weight: 700; color: var(--text-heading); line-height: 1.3; margin-bottom: 1.3em; text-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        h1 { font-size: clamp(3.1rem, 8vw, 5.6rem); letter-spacing: -1.5px; font-weight: 800; }
        h2 { font-size: clamp(2.1rem, 5.8vw, 3.2rem); }
        h3 { font-size: clamp(1.4rem, 4vw, 1.8rem); font-weight: 600; margin-bottom: 0.8em; /* Уменьшил отступ под h3 */ }
        p { margin-bottom: 1.6rem; font-size: clamp(1rem, 2.5vw, 1.1rem); max-width: 700px; opacity: 0.9; color: var(--text-medium); }
        a { color: var(--text-link); text-decoration: none; transition: color var(--transition-fast), text-shadow 0.3s ease; }
        a:hover { color: var(--text-link-hover); text-shadow: 0 0 8px var(--accent-glow); }

        .section-title {
             text-align: center; margin-bottom: 1.6rem; position: relative; padding-bottom: 1rem;
             padding-left: 20px; padding-right: 20px; /* Место для декоративных уголков */
        }
        /* Section Title - Decorative Corner (Top Left) - NEW */
        .section-title::before {
            content: '';
            position: absolute;
            width: 12px; /* Уменьшил размер */
            height: 12px;
            border-color: var(--accent-primary);
            border-style: solid;
            opacity: 0.5;
            top: 0; /* Позиция сверху */
            left: 0; /* Позиция слева */
            border-width: 2px 0 0 2px; /* Верхняя левая */
            transition: all var(--transition-medium);
        }
        .section-title:hover::before {
            opacity: 1;
            border-color: var(--accent-cyan);
            transform: translate(-3px, -3px); /* Легкое смещение при ховере */
        }

        .section-title span { /* Текст заголовка секции с неоном */
            color: var(--text-heading);
            text-shadow: 0 0 10px var(--accent-glow), 0 0 20px var(--accent-glow);
        }
        .section-title::after { /* Анимированное подчеркивание (Остается как есть) */
            content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 75px; height: 3px; border-radius: 1.5px;
            background: var(--gradient-border-anim);
            background-size: 300% 100%;
            animation: gradient-move 3.5s linear infinite;
            filter: drop-shadow(0 0 6px var(--accent-primary)); /* Тень под линией */
        }
        @keyframes gradient-move {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        .section-subtitle {
             font-size: clamp(1.05rem, 3vw, 1.2rem); text-align: center; max-width: 820px;
             margin: -1rem auto 4.2rem auto; color: var(--text-medium); opacity: 0.85;
         }

        /* --- Кнопки (v17 - Enhanced) --- */
        .btn {
            display: inline-block; padding: 0.9rem 2.4rem; /* Немного больше паддинг */
            background: transparent; color: var(--accent-primary);
            border: 2px solid var(--accent-primary); border-radius: var(--btn-radius);
            font-family: var(--font-secondary); font-weight: 600; font-size: 0.95rem;
            text-align: center; text-transform: uppercase; letter-spacing: 1.3px; /* Шире буквы */
            cursor: pointer; transition: all var(--transition-medium);
            position: relative; overflow: hidden; z-index: 1;
            box-shadow: 0 0 12px -2px var(--accent-glow), inset 0 0 8px -4px var(--accent-glow); /* Внешнее и внутреннее свечение */
            backdrop-filter: blur(2px); /* Легкий блюр фона под кнопкой */
        }
        .btn::before { /* Эффект заливки при наведении */
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: var(--gradient-button); transition: left 0.3s ease-in-out; z-index: -1;
        }
        .btn:hover {
            color: var(--text-fixed-dark); /* Темный текст на светлом фоне */
            border-color: var(--accent-secondary); /* Фиолетовая рамка при ховере */
            box-shadow: 0 0 25px var(--accent-secondary-glow), inset 0 0 10px rgba(var(--accent-secondary-rgb), 0.1); /* Фиолетовое свечение */
            transform: translateY(-3px); /* Легкий подъем */
        }
        .btn:hover::before {
             left: 0;
             background: var(--gradient-button-hover); /* Используем градиент ховера для заливки */
        }
        /* Improved Active State - NEW */
        .btn:active {
            transform: translateY(1px) scale(0.97); /* Чуть вниз и меньше */
            box-shadow: 0 0 8px var(--accent-secondary-glow), inset 0 0 10px rgba(0,0,0,0.2); /* Уменьшенная тень */
            transition: all 0.1s ease-out; /* Быстрая реакция на нажатие */
        }

        /* Стиль для контурной кнопки */
        .btn-outline {
            border-color: var(--accent-secondary); color: var(--accent-secondary);
            box-shadow: 0 0 12px -2px var(--accent-secondary-glow), inset 0 0 8px -4px var(--accent-secondary-glow);
        }
        .btn-outline::before { display: none; } /* Убираем эффект заливки для outline */
        .btn-outline:hover {
            background: rgba(var(--accent-secondary-rgb), 0.1); /* Легкий фон при ховере */
            border-color: var(--accent-pink); color: var(--accent-pink); /* Розовый при ховере */
            box-shadow: 0 0 18px var(--accent-pink-glow);
        }
        /* Active state for outline button */
        .btn-outline:active {
            transform: translateY(1px) scale(0.97);
            box-shadow: 0 0 8px var(--accent-pink-glow), inset 0 0 10px rgba(0,0,0,0.1);
            background: rgba(var(--accent-pink-rgb), 0.15);
        }

        /* --- Хедер (Шапка) --- */
        header {
             position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
             padding: 1rem 0;
             background: var(--gradient-header); /* Полупрозрачный градиент */
             backdrop-filter: blur(8px); /* Размытие фона */
             transition: background-color 0.3s ease, box-shadow 0.3s ease, padding 0.3s ease;
             border-bottom: 1px solid rgba(var(--accent-secondary-rgb), 0.1); /* Тонкая нижняя граница */
        }
        header.scrolled {
             padding: 0.7rem 0;
             background: rgba(5, 4, 16, 0.9); /* Более плотный фон при скролле */
             box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
             border-bottom: 1px solid rgba(var(--accent-secondary-rgb), 0.2);
        }
        .nav-container { display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; color: var(--text-heading); font-family: var(--font-secondary); font-weight: 700; font-size: 1.6rem; }
        .logo i { color: var(--accent-primary); margin-right: 0.5rem; font-size: 1.5rem; transition: transform 0.4s ease; } /* Slower rotate */
        .logo:hover i { transform: rotate(360deg); }
        .nav-links { display: flex; align-items: center; list-style: none; }
        .nav-item { color: var(--text-medium); margin-left: 1.8rem; font-size: 0.95rem; font-weight: 500; position: relative; padding: 0.5rem 0; }
        .nav-item::before { /* Индикатор активной ссылки */
             content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px;
             background-color: var(--accent-primary);
             transition: width 0.3s ease;
        }
        .nav-item:hover, .nav-item.active { color: var(--white); }
        .nav-item:hover::before, .nav-item.active::before { width: 100%; }
        .header-actions { display: flex; align-items: center; }
        .auth-link.desktop-auth-link { margin-left: 1.5rem; }
        .auth-link.mobile-auth-link { display: none; margin-top: 1.5rem; text-align: center; }
        .hamburger { display: none; /* Скрыт по умолчанию */ background: none; border: none; cursor: pointer; padding: 0.5rem; z-index: 1001; }
        .hamburger span { display: block; width: 25px; height: 3px; background-color: var(--white); margin: 5px 0; border-radius: 1.5px; transition: all 0.3s ease; }

        /* --- Герой секция (Hero) --- */
        .hero {
            padding: clamp(11rem, 28vh, 17rem) 0 clamp(8rem, 20vh, 11rem); /* Динамические отступы */
            background: var(--gradient-hero-bg); background-size: 170% 170%;
            animation: gradientBG 20s ease infinite alternate; /* Плавная анимация фона */
            text-align: center; overflow: hidden; position: relative;
            border-bottom: 1px solid var(--border-color-medium); /* Граница снизу */
        }
        @keyframes gradientBG { /* Анимация для фона героя */
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        .hero h1 { /* Главный заголовок */
            font-size: clamp(3.1rem, 8.2vw, 5.8rem); margin-bottom: 1.6rem; line-height: 1.15;
            font-weight: 800; color: var(--text-heading); /* Белый цвет */
            text-shadow: 0 0 12px var(--accent-glow), 0 0 30px var(--accent-glow), 0 0 50px var(--accent-secondary-glow); /* Мощная неоновая тень */
        }
        .hero h1 .highlight { /* Акцентное слово */
             color: var(--accent-cyan); /* Яркий циан */
             /* Дополнительная тень для акцента */
             text-shadow: 0 0 10px var(--accent-cyan-glow), 0 0 25px var(--accent-cyan-glow), 0 0 40px rgba(var(--accent-cyan-rgb), 0.3);
        }
        .hero p {
             max-width: 650px; margin: 0 auto 2.5rem auto; color: var(--text-light); font-size: clamp(1.1rem, 3vw, 1.25rem); opacity: 0.9;
        }
        .hero-buttons { display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap; }

        /* --- AI Interface v6 (Enhanced HUD) --- */
        .ai-interface-section {
             background: var(--bg-secondary); /* Темный фон */
             padding: var(--section-padding-y) 0;
             border-top: 1px solid var(--border-color-medium);
             position: relative; /* Для псевдоэлементов */
        }
        /* Дополнительные фоновые элементы для секции ИИ */
        .ai-interface-section::before {
             content: ''; position: absolute; top: 10%; left: 5%; width: 150px; height: 150px;
             background: radial-gradient(circle, rgba(var(--accent-primary-rgb), 0.08) 0%, transparent 70%);
             z-index: 0; pointer-events: none;
        }
        .ai-interface-section::after {
             content: ''; position: absolute; bottom: 15%; right: 8%; width: 100px; height: 100px;
             background: radial-gradient(circle, rgba(var(--accent-secondary-rgb), 0.06) 0%, transparent 70%);
             z-index: 0; pointer-events: none;
        }
        .ai-interface-wrapper {
            background: var(--interface-bg); /* Почти непрозрачный фон */
            backdrop-filter: blur(6px); /* Размытие */
            border: 1px solid var(--interface-border); /* Ярче рамка */
            border-radius: var(--card-radius); padding: clamp(1.5rem, 4vw, 2rem);
            box-shadow: var(--shadow-card), 0 0 45px rgba(var(--accent-secondary-rgb), 0.15) inset; /* Внешняя и внутренняя тень */
            position: relative; max-width: 1080px; margin: 2rem auto 0; display: flex; flex-direction: column;
            min-height: 480px; /* Минимальная высота */
            z-index: 1; /* Выше фоновых элементов */
            /* Pulsing Animation - NEW */
            animation: interface-pulse 3s infinite ease-in-out alternate;
            transition: border-color 0.3s ease, box-shadow 0.3s ease; /* Add transitions for smooth pulse */
        }
        /* Keyframes for Pulsing Interface - NEW */
        @keyframes interface-pulse {
            from {
                box-shadow: var(--shadow-card), 0 0 45px rgba(var(--accent-secondary-rgb), 0.15) inset, 0 0 15px rgba(var(--accent-primary-rgb), 0.2);
                border-color: var(--interface-border);
            }
            to {
                box-shadow: var(--shadow-card), 0 0 55px rgba(var(--accent-secondary-rgb), 0.20) inset, 0 0 25px rgba(var(--accent-primary-rgb), 0.3);
                border-color: rgba(var(--accent-primary-rgb), 0.5);
            }
        }

        /* HUD Уголки */
        .ai-interface-wrapper::before, .ai-interface-wrapper::after {
            content: ''; position: absolute; width: 30px; height: 30px;
            border-color: var(--accent-primary); border-style: solid; opacity: 0.8;
            transition: all 0.3s ease; pointer-events: none; /* Не мешают кликам */
        }
        .ai-interface-wrapper::before { top: 10px; left: 10px; border-width: 3px 0 0 3px; } /* Верхний левый */
        .ai-interface-wrapper::after { bottom: 10px; right: 10px; border-width: 0 3px 3px 0; } /* Нижний правый */
        .ai-interface-wrapper:hover::before { transform: translate(-3px, -3px); border-color: var(--accent-cyan); }
        .ai-interface-wrapper:hover::after { transform: translate(3px, 3px); border-color: var(--accent-cyan); }

        .ai-interface-header {
             margin-bottom: 1.2rem; padding-bottom: 1rem;
             border-bottom: 1px solid var(--interface-border);
             display: flex; justify-content: space-between; align-items: center;
             flex-wrap: wrap; gap: 10px;
        }
        .ai-interface-title {
             font-size: 1.1rem; color: var(--accent-cyan);
             text-shadow: 0 0 6px var(--accent-cyan-glow);
             font-family: var(--font-mono); /* Моноширинный */
             display: flex; align-items: center; gap: 0.5rem;
        }
        /* Blinking Status Indicator - NEW */
        .ai-status-indicator {
             font-size: 0.8rem; padding: 0.2rem 0.6rem; border-radius: 4px;
             background-color: rgba(var(--accent-lime-rgb), 0.15);
             color: var(--accent-lime); border: 1px solid rgba(var(--accent-lime-rgb), 0.3);
             font-family: var(--font-mono); text-transform: uppercase;
             animation: status-blink 1.5s infinite steps(1, end);
        }
        @keyframes status-blink {
           50% { background-color: rgba(var(--accent-lime-rgb), 0.3); color: var(--white); }
        }

        .ai-content-area { flex-grow: 1; display: flex; flex-direction: column; } /* Занимает оставшееся место */
        .ai-log-window {
             background-color: rgba(4, 2, 10, 0.85); /* Очень темный фон лога */
             border-radius: 6px; flex-grow: 1; /* Растягивается */
             border: 1px solid var(--border-color-light); font-size: 0.9rem; /* Чуть крупнее шрифт */
             min-height: 260px; padding: 1rem; margin-bottom: 1.5rem;
             overflow-y: auto; /* Скролл, если много текста */
             box-shadow: inset 0 0 15px rgba(0,0,0,0.3);
             font-family: var(--font-mono); /* Моноширинный шрифт для лога */
             color: var(--text-light); /* Светлый текст */
        }
        /* Стилизация скроллбара (опционально, Webkit) */
        .ai-log-window::-webkit-scrollbar { width: 8px; }
        .ai-log-window::-webkit-scrollbar-track { background: rgba(var(--accent-secondary-rgb), 0.1); border-radius: 4px; }
        .ai-log-window::-webkit-scrollbar-thumb { background-color: var(--accent-primary); border-radius: 4px; border: 2px solid transparent; background-clip: content-box; }
        .ai-log-window::-webkit-scrollbar-thumb:hover { background-color: var(--accent-cyan); }

        .ai-demo-line { /* Строка в логе */
             margin-bottom: 0.7em; line-height: 1.5;
             transition: opacity 0.3s ease;
             position: relative;
             padding-left: 1.8em; /* Отступ для иконки/префикса */
        }
        .ai-demo-line::before { /* Префикс строки */
             content: '>'; /* По умолчанию */
             position: absolute; left: 0; top: 0;
             font-weight: 700;
             font-family: var(--font-mono);
        }
        .ai-demo-line.user::before { content: 'USR:'; color: var(--accent-pink); }
        .ai-demo-line.ai::before { content: 'AI:'; color: var(--accent-cyan); }
        .ai-demo-line.analysis::before { content: 'SYS:'; color: var(--accent-secondary); }
        .ai-demo-line.analysis { color: var(--text-muted); font-style: italic; }

        .typing-cursor { /* Курсор при печати */
            display: inline-block; width: 8px; height: 1em; background-color: var(--accent-cyan);
            animation: blink 0.7s infinite; margin-left: 2px; vertical-align: middle;
        }
        @keyframes blink { 50% { opacity: 0; } }

        .ai-progress-bar-container { margin-top: auto; /* Прижимает прогресс-бар вниз */}
        .ai-progress-bar-label {
             font-size: 0.8rem; color: var(--text-muted);
             margin-bottom: 0.5rem; font-family: var(--font-mono);
         }
        .ai-progress-bar { height: 10px; background-color: var(--border-color-light); border-radius: 5px; overflow: hidden; }
        .ai-progress-bar-inner {
             height: 100%; width: 0%; /* Ширина управляется JS */
             background: var(--gradient-button); /* Градиент */
             box-shadow: 0 0 10px var(--accent-glow);
             border-radius: 5px;
             transition: width 0.4s ease-out; /* Плавное изменение ширины */
             animation: progress-pulse 1.8s infinite ease-in-out; /* Пульсация */
        }
        @keyframes progress-pulse {
            50% { filter: brightness(1.3); box-shadow: 0 0 15px var(--accent-glow);}
        }

        /* --- Features (Фичи - Enhanced Hover) --- */
        .features {
            background: var(--bg-secondary);
            padding: var(--section-padding-y) 0;
            border-top: 1px solid var(--border-color-medium);
         }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .feature-card {
            background: var(--card-solid); /* Сплошной фон */
            border: 1px solid var(--border-color-light);
            padding: 2rem; border-radius: var(--card-radius);
            transition: transform var(--transition-medium), border-color var(--transition-medium), box-shadow var(--transition-medium), background var(--transition-medium); /* Added background to transition */
            position: relative; overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        /* Enhanced Hover Border - NEW */
        .feature-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
            background: var(--border-glow-gradient); background-size: 200% 100%;
            animation: gradient-move 3.5s linear infinite paused; /* Paused by default */
            opacity: 0;
            transition: opacity var(--transition-medium), transform 0.4s ease-out; /* Added transform transition */
            transform: scaleX(0); /* Start scaled down */
            transform-origin: left; /* Animate from left */
            z-index: 2;
        }
        .feature-card:hover {
             transform: translateY(-7px); /* Подъем */
             border-color: var(--border-color-strong); /* Ярче рамка */
             box-shadow: var(--shadow-card-hover-enhanced); /* Усиленная тень + свечение */
             background: var(--gradient-card-highlight); /* Легкий градиентный фон */
        }
        .feature-card:hover::before {
            opacity: 0.9;
            transform: scaleX(1); /* Expand border */
            animation-play-state: running; /* Start gradient animation */
        }

        .feature-card-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; }
        /* Enhanced Icon Hover - NEW */
        .feature-icon {
             background: var(--accent-primary); color: var(--text-fixed-dark);
             box-shadow: 0 0 10px var(--accent-glow);
             width: 48px; height: 52px; font-size: 1.5rem; flex-shrink: 0;
             clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
             display: flex; align-items: center; justify-content: center;
             transition: var(--transition-bounce); /* Bouncy transition */
        }
        .feature-card:hover .feature-icon {
             background: var(--accent-cyan); /* Цвет меняется на циан */
             transform: rotate(15deg) scale(1.15); /* Увеличен угол и масштаб */
             box-shadow: 0 0 20px var(--accent-cyan-glow); /* Усиленное свечение */
        }
        .feature-card h3 { margin-bottom: 0; } /* Убираем лишний отступ у h3 */
        .feature-card p { color: var(--text-muted); font-size: 0.95rem; margin-bottom: 0; } /* Уменьшен текст, убран отступ */

        /* --- How it Works (Как это работает) --- */
        .how-it-works {
             background: var(--bg-color); /* Основной фон */
             padding: var(--section-padding-y) 0;
             border-top: 1px solid var(--border-color-medium);
             position: relative; /* Для линии таймлайна */
        }
        .timeline-container {
             max-width: 800px; margin: 3rem auto 0; position: relative;
             padding: 2rem 0;
        }
        /* Вертикальная линия таймлайна */
        .timeline-container::before {
             content: ''; position: absolute; top: 0; bottom: 0; left: 30px;
             width: 3px; background-color: rgba(var(--accent-secondary-rgb), 0.15);
             border-radius: 1.5px;
        }
        /* Пульсирующая точка на линии */
        .timeline-container::after {
             content: ''; position: absolute; top: 0; left: 24px; /* Центрирование */
             width: 15px; height: 15px; border-radius: 50%;
             background-color: var(--accent-primary);
             box-shadow: 0 0 15px var(--accent-glow);
             animation: pulse-line 2s infinite ease-in-out;
             z-index: 1;
        }
        @keyframes pulse-line {
             0%, 100% { transform: scale(1); opacity: 1; }
             50% { transform: scale(1.3); opacity: 0.7; }
        }
        .timeline-item {
             position: relative; margin-bottom: 3.5rem; padding-left: 75px; /* Отступ от иконки */
             min-height: 60px; /* Чтобы контент не залезал на иконку */
        }
        .timeline-item:last-child { margin-bottom: 0; }
        .timeline-icon {
             position: absolute; left: 0; top: 0;
             width: 60px; height: 60px; border-radius: 50%;
             background: var(--card-solid); /* Фон иконки */
             border: 2px solid var(--border-color-medium);
             color: var(--accent-primary);
             font-size: 1.3rem; font-weight: 700; font-family: var(--font-secondary); /* Poppins for numbers */
             display: flex; align-items: center; justify-content: center;
             box-shadow: 0 0 12px rgba(var(--accent-primary-rgb), 0.2);
             transition: all var(--transition-medium);
             z-index: 2; /* Над линией */
        }
        .timeline-item:hover .timeline-icon {
             border-color: var(--accent-primary);
             transform: scale(1.1);
             box-shadow: 0 0 20px var(--accent-glow);
        }
        .timeline-content h3 { margin-bottom: 0.5em; color: var(--text-light); }
        .timeline-content p { margin-bottom: 0; color: var(--text-muted); font-size: 0.95rem; }

        /* --- Testimonials (Отзывы) --- */
        .testimonials {
             background: var(--bg-secondary); /* Темный фон */
             padding: var(--section-padding-y) 0;
             border-top: 1px solid var(--border-color-medium);
        }
        .testimonials-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; }
        .testimonial-card {
            background: var(--card-bg); /* Полупрозрачный фон */
            backdrop-filter: blur(10px); /* Сильнее размытие - "стекло" */
            border: 1px solid var(--border-color-light); border-radius: var(--card-radius);
            padding: 2.2rem; position: relative;
            transition: transform var(--transition-medium), box-shadow var(--transition-medium), background var(--transition-medium); /* Adjusted transitions */
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            overflow: hidden; /* Needed for the mask effect */
            z-index: 1; /* Ensure cards stack correctly */
        }
        /* Градиентная рамка при наведении (сохраняем маску) */
        .testimonial-card::before {
             content: ''; position: absolute; inset: -1px; /* За пределы */
             border-radius: inherit; /* Наследует радиус */
             background: linear-gradient(135deg, rgba(var(--accent-primary-rgb), 0.5), rgba(var(--accent-secondary-rgb), 0.4));
             opacity: 0;
             transition: opacity var(--transition-medium); /* Smooth opacity transition */
             z-index: -1; /* Под контентом */
             mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); /* Вырезает центр */
             -webkit-mask-composite: xor; mask-composite: exclude;
        }
        .testimonial-card:hover {
             transform: translateY(-7px);
             box-shadow: var(--shadow-card), 0 0 20px rgba(var(--accent-primary-rgb), 0.15); /* Усиленная тень + легкое свечение */
             background: rgba(18, 12, 50, 0.9); /* Чуть плотнее фон при ховере */
        }
        .testimonial-card:hover::before {
             opacity: 0.8; /* Показать границу плавно */
        }
        .testimonial-content { margin-bottom: 1.5rem; }
        .testimonial-rating { color: var(--accent-cyan); margin-bottom: 1rem; font-size: 1.1rem; } /* Циановые звезды */
        .testimonial-text { color: var(--text-light); font-size: 1rem; line-height: 1.7; font-style: italic; margin-bottom: 0; }
        .testimonial-author { display: flex; align-items: center; gap: 1rem; }
        .testimonial-avatar {
             width: 55px; height: 55px; border-radius: 50%;
             border: 3px solid var(--accent-primary); /* Рамка аватара */
             box-shadow: 0 0 10px var(--accent-glow); /* Свечение аватара */
             background-color: var(--bg-secondary); /* Placeholder color */
             /* background-image: url('path/to/avatar.jpg'); */ /* Add user image here */
             background-size: cover; background-position: center; flex-shrink: 0;
             transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .testimonial-card:hover .testimonial-avatar {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 15px var(--accent-cyan-glow);
        }
        .testimonial-name { font-weight: 600; color: var(--white); font-size: 1rem; }
        .testimonial-role { font-size: 0.85rem; color: var(--text-muted); }

        /* --- Pricing (Цены - Enhanced Hover for non-popular) --- */
         .pricing {
             background: var(--bg-color); /* Основной фон */
             padding: var(--section-padding-y) 0;
             border-top: 1px solid var(--border-color-medium);
         }
         .pricing-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; align-items: stretch; /* Stretch cards to same height */ }
         .pricing-card {
             background: var(--card-solid);
             border: 1px solid var(--border-color-medium); /* Чуть ярче базовая рамка */
             border-radius: var(--card-radius); padding: 2.5rem 1.5rem;
             text-align: center;
             transition: transform var(--transition-medium), border-color var(--transition-medium), box-shadow var(--transition-medium), background var(--transition-medium); /* Consistent transitions */
             position: relative; overflow: hidden;
             display: flex; flex-direction: column; height: 100%; /* Растянуть по высоте */
             box-shadow: 0 8px 25px rgba(0,0,0,0.2); /* Base shadow */
         }
         /* Hover effect for non-popular cards - NEW */
         .pricing-card:not(.popular)::before {
             content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
             background: var(--border-glow-gradient); background-size: 200% 100%;
             animation: gradient-move 3.5s linear infinite paused;
             opacity: 0;
             transition: opacity var(--transition-medium), transform 0.4s ease-out;
             transform: scaleX(0);
             transform-origin: left;
             z-index: 2;
         }
         .pricing-card:not(.popular):hover {
              transform: translateY(-7px);
              border-color: var(--border-color-strong);
              box-shadow: var(--shadow-card-hover-enhanced); /* Use enhanced shadow */
              background: var(--gradient-card-highlight);
         }
         .pricing-card:not(.popular):hover::before {
             opacity: 0.9;
             transform: scaleX(1);
             animation-play-state: running;
         }
         /* Popular Card Styling (remains largely the same but ensures it's above) */
         .pricing-card.popular {
             border-color: var(--accent-primary); /* Яркая рамка */
             background: linear-gradient(175deg, var(--card-solid) 0%, var(--dark-purple-accent) 100%); /* Градиентный фон */
             box-shadow: 0 12px 40px rgba(0,0,0,0.3), 0 0 30px var(--accent-glow); /* Заметная тень и свечение */
             transform: scale(1.04) translateY(-10px); /* Выделение популярного плана */
             z-index: 5; /* Поверх других */
         }
         .popular-badge {
             position: absolute; top: -1px; left: 50%; transform: translateX(-50%) translateY(-50%);
             background: var(--gradient-button); /* Градиент */
             color: var(--white); padding: 0.4rem 1.2rem; border-radius: 15px;
             font-size: 0.8rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
             box-shadow: 0 4px 10px rgba(var(--accent-secondary-rgb), 0.4);
             z-index: 6; /* Above card content */
         }
         .pricing-icon {
              font-size: 3rem; color: var(--accent-primary);
              margin-bottom: 1rem; filter: drop-shadow(0 0 10px var(--accent-glow)); /* Тень-свечение иконки */
              transition: all 0.3s ease;
         }
         .pricing-card:hover .pricing-icon { transform: scale(1.1) rotate(5deg); } /* Added rotate on hover */
         .pricing-card.popular .pricing-icon { color: var(--accent-cyan); filter: drop-shadow(0 0 15px var(--accent-cyan-glow)); } /* Ярче иконка на популярном */

         .pricing-card h3 { font-size: 1.4rem; margin-bottom: 0.8rem; }
         .pricing-price { font-size: 2.5rem; font-weight: 700; color: var(--white); margin-bottom: 0.3rem; font-family: var(--font-secondary); } /* Using Poppins */
         .pricing-period { font-size: 1rem; font-weight: 400; color: var(--text-muted); }
         .pricing-features { margin: 2rem 0; text-align: left; flex-grow: 1; } /* Растягивается, чтобы кнопка была внизу */
         .pricing-feature {
              margin-bottom: 0.8rem; display: flex; align-items: center; gap: 0.7rem;
              font-size: 0.95rem; color: var(--text-medium);
         }
         .pricing-feature i { color: var(--accent-lime); font-size: 1.1rem; /* Лаймовые галочки */ flex-shrink: 0; }
         .pricing-feature.disabled { color: var(--text-muted); text-decoration: line-through; opacity: 0.6; }
         .pricing-feature.disabled i { color: var(--text-muted); }
         .pricing-feature span { flex-grow: 1; }
         .pricing-feature span strong { color: var(--text-light); font-weight: 600; } /* Выделение "+ Vše z..." */

         .pricing-card .btn { margin-top: auto; /* Прижимает кнопку вниз */ width: 100%; }

        /* --- CTA (Призыв к действию) --- */
        .cta {
             background: var(--gradient-cta); /* Фиолетово-розовый градиент */
             padding: clamp(4rem, 10vh, 6rem) 0;
             text-align: center; color: var(--white);
             border-top: 1px solid rgba(255, 255, 255, 0.1); /* Светлая граница */
        }
        .cta h2 {
             font-size: clamp(2rem, 5vw, 2.8rem); color: var(--white);
             text-shadow: 0 2px 10px rgba(0,0,0,0.3); margin-bottom: 1rem;
        }
        .cta p {
             max-width: 600px; margin-left: auto; margin-right: auto;
             color: rgba(255, 255, 255, 0.9); font-size: 1.1rem; margin-bottom: 2rem;
        }
        .cta .btn { /* Кнопка в CTA */
             background: var(--white); color: var(--accent-pink); /* Белый фон, розовый текст */
             border-color: var(--white); font-weight: 700;
             box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
             /* Reset specific button styles if needed */
             backdrop-filter: none;
             box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }
        .cta .btn::before { display: none; } /* Убираем эффект заливки */
        .cta .btn:hover {
             background: var(--text-fixed-dark); /* Темный фон */
             color: var(--white); border-color: var(--text-fixed-dark);
             transform: translateY(-4px) scale(1.03); /* Сильнее эффект */
             box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        .cta .btn:active {
             transform: translateY(0px) scale(0.99); /* Adjusted active state */
             box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
        }

        /* --- Футер (Footer) --- */
        footer {
             background: var(--bg-secondary); color: var(--text-muted);
             padding: 4rem 0 2rem 0; border-top: 1px solid var(--border-color-medium);
             font-size: 0.9rem;
        }
        .footer-grid {
             display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
             gap: 2.5rem; margin-bottom: 3rem;
        }
        .footer-column h3 { font-size: 1.1rem; color: var(--text-light); margin-bottom: 1rem; }
        .footer-column .logo { font-size: 1.5rem; margin-bottom: 1rem; } /* Лого в футере */
        .footer-column p { font-size: 0.9rem; margin-bottom: 1.5rem; max-width: 250px; }
        .social-links { display: flex; gap: 1rem; }
        .social-link {
             color: var(--text-muted); font-size: 1.2rem;
             transition: color 0.2s ease, transform 0.2s ease;
        }
        .social-link:hover { color: var(--accent-primary); transform: translateY(-3px); }
        .footer-links { list-style: none; padding: 0; margin: 0; }
        .footer-links li { margin-bottom: 0.6rem; }
        .footer-links a { color: var(--text-muted); transition: color 0.2s ease; }
        .footer-links a:hover { color: var(--accent-primary); }
        .copyright {
             text-align: center; padding-top: 2rem;
             border-top: 1px solid var(--border-color-light);
             font-size: 0.85rem; color: var(--text-muted);
        }
        .copyright i { margin: 0 0.2rem; }

        /* --- Адаптивность (Responsiveness) --- */
        @media (max-width: 992px) {
             .nav-container { padding: 0 5%; } /* Отступы для планшетов */
             .features-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
             .pricing-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; } /* Reduced gap */
             .pricing-card.popular { transform: scale(1.02) translateY(0); } /* Less pronounced scale on tablet */
             .testimonials-grid { grid-template-columns: 1fr; max-width: 500px; margin: 0 auto; } /* Отзывы в одну колонку */
             .footer-grid { gap: 2rem; }
        }

        @media (max-width: 768px) {
             html { font-size: 15px; } /* Уменьшаем базовый шрифт */
             .nav-links {
                 position: fixed; top: 0; right: -100%; /* Скрыто за экраном */
                 width: 75%; max-width: 320px; height: 100vh;
                 background-color: var(--bg-secondary); /* Фон меню */
                 flex-direction: column; justify-content: center; align-items: center;
                 padding: 2rem; transition: right 0.4s cubic-bezier(0.23, 1, 0.32, 1); /* Плавный выезд */
                 box-shadow: -5px 0 20px rgba(0, 0, 0, 0.2);
                 border-left: 1px solid var(--border-color-medium);
                 z-index: 1000;
             }
             .nav-links.active { right: 0; /* Показать меню */ }
             .nav-item { margin: 1rem 0; font-size: 1.1rem; }
             .hamburger { display: block; z-index: 1001; /* Над оверлеем */}
             /* Стили для крестика гамбургера */
             .hamburger.active span:nth-child(1) { transform: translateY(8px) rotate(45deg); }
             .hamburger.active span:nth-child(2) { opacity: 0; }
             .hamburger.active span:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }
             .auth-link.desktop-auth-link { display: none; } /* Скрыть кнопку в хедере */
             .auth-link.mobile-auth-link { display: block; /* Показать кнопку в меню */ }
             .menu-overlay {
                 position: fixed; inset: 0; background-color: rgba(5, 4, 16, 0.85);
                 backdrop-filter: blur(6px); z-index: 999; /* Под меню, над контентом */
                 opacity: 0; pointer-events: none; transition: opacity 0.4s ease;
             }
             .menu-overlay.active { opacity: 1; pointer-events: auto; }
             body.menu-open { overflow: hidden; } /* Запретить скролл фона */

             .hero h1 { font-size: clamp(2.5rem, 10vw, 3.5rem); }
             .hero p { font-size: 1.1rem; }
             .hero-buttons { flex-direction: column; gap: 1rem; align-items: center; }
             .hero-buttons .btn { width: 80%; max-width: 300px; } /* Кнопки в столбец */

             .ai-interface-wrapper { min-height: 400px; padding: 1.2rem;}
             .ai-log-window { min-height: 220px; font-size: 0.85rem; }
             .footer-grid { grid-template-columns: 1fr; text-align: center; }
             .footer-column p { margin-left: auto; margin-right: auto; }
             .social-links { justify-content: center; }
             .pricing-card.popular { transform: scale(1) translateY(0); } /* No scale on mobile */
             .pricing-grid { grid-template-columns: 1fr; max-width: 350px; margin: 0 auto;} /* Stack pricing cards */
        }

        @media (max-width: 576px) {
             html { font-size: 14px; }
             .hero h1 { font-size: 2.3rem; }
             .section-title { font-size: 1.8rem; }
             .section-title::before { display: none; } /* Hide corner bracket on small screens */
             .btn { padding: 0.85rem 2rem; font-size: 0.9rem; letter-spacing: 1px; }
             .feature-card { padding: 1.8rem 1.5rem; }
             .pricing-card { padding: 2rem 1.2rem; }
             .pricing-price { font-size: 2.2rem; }
             .ai-interface-wrapper::before, .ai-interface-wrapper::after { display: none; } /* Скрыть уголки на мал. экранах */
        }

        /* --- Анимации появления (v17 - Faster Fade) --- */
        [data-animate] {
             opacity: 0;
             transform: translateY(25px);
             transition: opacity 0.5s ease-out, transform 0.5s ease-out; /* Чуть быстрее */
        }
        [data-animate].animated { opacity: 1; transform: translateY(0); }
        /* Ступенчатая задержка для сеток */
        .features-grid [data-animate],
        .timeline-container [data-animate],
        .testimonials-grid [data-animate],
        .pricing-grid [data-animate],
        .footer-grid [data-animate] {
             transition-delay: calc(var(--animation-order, 0) * 0.1s);
        }

    </style>
    </head>
<body class="dark">
    <header id="header">
        <div class="container nav-container">
            <a href="#" class="logo">
                <i class="fas fa-atom"></i> <span>JUSTAX</span>
            </a>
            <nav class="nav-links" id="navLinks">
                <a href="#features" class="nav-item">Power Ups</a>
                <a href="#ai-demo" class="nav-item">AI Core</a>
                <a href="#how-it-works" class="nav-item">Start Engine</a>
                <a href="#pricing" class="nav-item">Plány</a>
                <a href="#testimonials" class="nav-item">Důkazy</a>
                <a href="#contact" class="nav-item">Kontakt</a>
                <a href="auth/index.html" class="btn auth-link mobile-auth-link">Připojit se</a>
            </nav>
            <div class="header-actions">
                <a href="auth/index.html" class="btn auth-link desktop-auth-link">Připojit se</a>
                <button class="hamburger" id="hamburger" aria-label="Menu" aria-expanded="false" aria-controls="navLinks">
                    <span></span><span></span><span></span>
                </button>
            </div>
        </div>
    </header>

    <div class="menu-overlay" id="menuOverlay"></div>

    <main>
        <section class="hero">
            <div class="container">
                <h1 data-animate>ZNIČ ZKOUŠKY.<br> <span class="highlight">OVLÁDNI VĚDĚNÍ.</span></h1>
                <p data-animate>Zapomeň na stres. Justax AI je tvůj osobní kybernetický augment pro učení. Personalizace. Efektivita. Výsledky.</p>
                <div class="hero-buttons" data-animate>
                    <a href="auth/index.html" class="btn auth-link">AKTIVOVAT AI ZDARMA</a>
                    <a href="#ai-demo" class="btn btn-outline">SLEDOVAT DEMO</a>
                </div>
            </div>
        </section>

        <section class="features" id="features">
            <div class="container">
                <h2 class="section-title" data-animate><span>TVOJE KYBER-VÝHODY</span></h2>
                <p class="section-subtitle" data-animate>Nejsme jen appka. Jsme upgrade tvého mozku.</p>
                <div class="features-grid">
                    <div class="feature-card" data-animate style="--animation-order: 1;">
                         <div class="feature-card-header">
                             <div class="feature-icon"><i class="fas fa-brain"></i></div>
                             <h3>Adaptivní Sync</h3>
                         </div>
                         <p>AI se synchronizuje s tvým mozkem. Žádné zbytečnosti.</p>
                     </div>
                     <div class="feature-card" data-animate style="--animation-order: 2;">
                         <div class="feature-card-header">
                            <div class="feature-icon"><i class="fas fa-route"></i></div>
                            <h3>Hyper-Efektivita</h3>
                        </div>
                        <p>Optimalizovaná trasa k cíli. Maximální výsledek za minimální čas.</p>
                    </div>
                     <div class="feature-card" data-animate style="--animation-order: 3;">
                         <div class="feature-card-header">
                            <div class="feature-icon"><i class="fas fa-bullseye"></i></div>
                            <h3>CERMAT Simulátor</h3>
                        </div>
                        <p>Trénuj na tom, co tě čeká. Znič testy bez překvapení.</p>
                    </div>
                     <div class="feature-card" data-animate style="--animation-order: 4;">
                         <div class="feature-card-header">
                            <div class="feature-icon"><i class="fas fa-chalkboard-teacher"></i></div>
                            <h3>AI Vysvětlovač</h3>
                        </div>
                        <p>Složité věci jednoduše. Konečně pochopíš "proč".</p>
                    </div>
                     <div class="feature-card" data-animate style="--animation-order: 5;">
                         <div class="feature-card-header">
                            <div class="feature-icon"><i class="fas fa-bug-slash"></i></div>
                            <h3>Error Correction</h3>
                        </div>
                        <p>AI najde a opraví tvé systémové chyby. Zvyš level.</p>
                    </div>
                     <div class="feature-card" data-animate style="--animation-order: 6;">
                         <div class="feature-card-header">
                             <div class="feature-icon"><i class="fas fa-clock"></i></div>
                            <h3>24/7 Připravenost</h3>
                        </div>
                        <p>Tvůj AI augment nespí. Uč se kdykoliv a kdekoliv.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="ai-interface-section" id="ai-demo">
             <div class="container">
                 <h2 class="section-title" data-animate><span>AI CORE // ONLINE FEED</span></h2>
                 <p class="section-subtitle" data-animate>Sleduj simulaci Justax AI Core při práci: analýza, adaptace, vysvětlení v reálném čase.</p>
                 <div class="ai-interface-wrapper" data-animate>
                     <div class="ai-interface-header">
                         <div class="ai-interface-title"><i class="fas fa-atom"></i> Justax AI Core [v17.0]</div> {/* Updated version */ }
                         <div class="ai-status-indicator">OPTIMAL</div>
                     </div>
                     <div class="ai-content-area">
                         <div class="ai-log-window" id="ai-demo-output">
                             </div>
                         <div class="ai-progress-bar-container">
                             <div class="ai-progress-bar-label">Processing // Task Analysis</div>
                             <div class="ai-progress-bar">
                                 <div class="ai-progress-bar-inner" id="ai-progress-bar" style="width: 0%;"></div>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </section>

        <section class="how-it-works" id="how-it-works">
            <div class="container">
                <h2 class="section-title" data-animate><span>PROTOKOL INICIACE</span></h2>
                <p class="section-subtitle" data-animate>Připojení k Justax AI je snadné. Postupuj podle kroků.</p>
                <div class="timeline-container">
                     <div class="timeline-item" data-animate style="--animation-order: 1;">
                        <div class="timeline-icon">01</div>
                        <div class="timeline-content">
                            <h3>REGISTRACE</h3>
                            <p>Vytvoř účet, definuj misi (SŠ/Maturita).</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-animate style="--animation-order: 2;">
                        <div class="timeline-icon">02</div>
                        <div class="timeline-content">
                            <h3>DIAGNOSTIKA</h3>
                            <p>AI proskenuje tvé skilly. Identifikace slabin.</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-animate style="--animation-order: 3;">
                        <div class="timeline-icon">03</div>
                        <div class="timeline-content">
                            <h3>PERSONALIZACE</h3>
                            <p>Generování tvé unikátní tréninkové mapy.</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-animate style="--animation-order: 4;">
                        <div class="timeline-icon">04</div>
                        <div class="timeline-content">
                            <h3>TRÉNINK</h3>
                            <p>Řeš úlohy, získávej AI feedback, sleduj progress.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="testimonials" id="testimonials">
             <div class="container">
                <h2 class="section-title" data-animate><span>DŮKAZY Z REÁLNÉHO SVĚTA</span></h2>
                <p class="section-subtitle" data-animate>Žádné kecy. Jen výsledky od skutečných uživatelů.</p>
                <div class="testimonials-grid">
                    <div class="testimonial-card" data-animate style="--animation-order: 1;">
                        <div class="testimonial-content">
                            <div class="testimonial-rating"> <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i> </div>
                           <p class="testimonial-text">"Kurva dobrý! Konečně jsem pochopil matiku, co mi nešla roky. AI vysvětluje líp než učitel. Dal jsem přijímačky!"</p>
                       </div>
                       <div class="testimonial-author">
                           <div class="testimonial-avatar" style="background-image: url('https://via.placeholder.com/55/00e0ff/050410?text=CM');"></div>
                           <div class="testimonial-author-info"> <div class="testimonial-name">CyberMike_77</div> <div class="testimonial-role">Student // Upgrade Complete</div> </div>
                       </div>
                   </div>
                   <div class="testimonial-card" data-animate style="--animation-order: 2;">
                       <div class="testimonial-content">
                           <div class="testimonial-rating"> <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i> </div>
                           <p class="testimonial-text">"Maturita z ČJ byla hračka. Justax mě přesně připravil na to, co bylo v testu. Ušetřilo mi to mega času a nervů."</p>
                        </div>
                       <div class="testimonial-author">
                            <div class="testimonial-avatar" style="background-image: url('https://via.placeholder.com/55/a05cff/050410?text=NK');"></div>
                           <div class="testimonial-author-info"> <div class="testimonial-name">Neon_Katka</div> <div class="testimonial-role">Maturantka // Level Up</div> </div>
                       </div>
                   </div>
                   <div class="testimonial-card" data-animate style="--animation-order: 3;">
                        <div class="testimonial-content">
                            <div class="testimonial-rating"> <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i> </div>
                           <p class="testimonial-text">"Pro našeho syna to byla nejlepší investice do vzdělání. Zlepšení bylo vidět téměř okamžitě."</p>
                        </div>
                       <div class="testimonial-author">
                            <div class="testimonial-avatar" style="background-image: url('https://via.placeholder.com/55/ff33a8/050410?text=DD');"></div>
                           <div class="testimonial-author-info"> <div class="testimonial-name">DataDad_01</div> <div class="testimonial-role">Rodič // System Monitor</div> </div>
                       </div>
                   </div>
                </div>
            </div>
        </section>

        <section class="pricing" id="pricing">
             <div class="container">
                <h2 class="section-title" data-animate><span>ZVOL SI SVŮJ UPGRADE</span></h2>
                <p class="section-subtitle" data-animate>Žádný bullshit, jen čistá síla AI. Vyber plán a odemkni svůj potenciál.</p>
                <div class="pricing-grid">
                     <div class="pricing-card" data-animate style="--animation-order: 1;">
                         <div class="pricing-icon"><i class="fas fa-rocket"></i></div>
                        <h3>BASIC IMPLANT</h3>
                        <div class="pricing-price">499 Kč<span class="pricing-period"> / měsíc</span></div>
                        <div class="pricing-features">
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Adaptivní AI jádro</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Personalizovaná cvičení</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Základní diagnostika</span></div>
                            <div class="pricing-feature disabled"><i class="fas fa-times"></i><span>Analýza chyb</span></div>
                            <div class="pricing-feature disabled"><i class="fas fa-times"></i><span>Dynamický plán</span></div>
                        </div>
                        <a href="auth/index.html" class="btn btn-outline auth-link">Aktivovat Základ</a>
                    </div>
                     <div class="pricing-card popular" data-animate style="--animation-order: 2;">
                        <div class="popular-badge">NEJLEPŠÍ DEAL</div>
                        <div class="pricing-icon"><i class="fas fa-brain"></i></div>
                        <h3>PRO CORE</h3>
                        <div class="pricing-price">999 Kč<span class="pricing-period"> / měsíc</span></div>
                        <div class="pricing-features">
                            <div class="pricing-feature"><i class="fas fa-check"></i><span><strong>Vše z BASIC +</strong></span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Pokročilé AI (Gemini+)</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Full CERMAT Databáze</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Detailní Reporting</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Hloubková Analýza Chyb</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Dynamický Studijní Plán</span></div>
                        </div>
                        <a href="auth/index.html" class="btn auth-link">Upgrade na PRO</a>
                    </div>
                    <div class="pricing-card" data-animate style="--animation-order: 3;">
                         <div class="pricing-icon"><i class="fas fa-infinity"></i></div>
                        <h3>ULTIMATE AUGMENT</h3>
                        <div class="pricing-price">1499 Kč<span class="pricing-period"> / měsíc</span></div>
                        <div class="pricing-features">
                             <div class="pricing-feature"><i class="fas fa-check"></i><span><strong>Vše z PRO +</strong></span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Top AI Jádro (GPT-4o+)</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Neomezené Lekce</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Prediktivní Analýza</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Realistické Simulace</span></div>
                            <div class="pricing-feature"><i class="fas fa-check"></i><span>Prioritní Support Linka</span></div>
                        </div>
                        <a href="auth/index.html" class="btn btn-outline auth-link">Odemknout Maximum</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="cta" id="cta">
             <div class="container">
                <h2 data-animate>PŘESTAŇ SE SRÁT. ZAČNI DOMINOVAT.</h2>
                <p data-animate>Aktivuj Justax AI zdarma a ukaž zkouškám, kdo je tady pánem.</p>
                <a href="auth/index.html" class="btn auth-link" data-animate>CHCI SVŮJ UPGRADE TEĎ!</a>
            </div>
        </section>
    </main>

    <footer id="contact">
        <div class="container">
            <div class="footer-grid">
                 <div class="footer-column" data-animate style="--animation-order: 1;">
                     <a href="#" class="logo"> <i class="fas fa-atom"></i> <span>JUSTAX</span> </a>
                    <p>AI Augmentace Vzdělávání.</p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                         <a href="#" class="social-link" aria-label="X"><i class="fab fa-xing"></i></a> {/* Changed X icon */ }
                         </div>
                </div>
                 <div class="footer-column" data-animate style="--animation-order: 2;">
                    <h3>Navigace</h3>
                    <ul class="footer-links">
                        <li><a href="#features">Power Ups</a></li>
                        <li><a href="#ai-demo">AI Core</a></li>
                        <li><a href="#how-it-works">Start Engine</a></li>
                        <li><a href="#pricing">Plány</a></li>
                         <li><a href="#">Blog</a></li> {/* Placeholder */}
                    </ul>
                </div>
                <div class="footer-column" data-animate style="--animation-order: 3;">
                    <h3>Systém</h3>
                    <ul class="footer-links">
                        <li><a href="/privacy-policy">Privacy Protokol</a></li> {/* Placeholder link */}
                        <li><a href="/terms">Podmínky Připojení</a></li> {/* Placeholder link */}
                        <li><a href="#">Cookies</a></li> {/* Placeholder link */}
                    </ul>
                </div>
                <div class="footer-column" data-animate style="--animation-order: 4;">
                    <h3>Support</h3>
                    <ul class="footer-links">
                        <li><a href="mailto:podpora@justax.space">podpora@justax.space</a></li>
                        <li><a><i class="fas fa-map-marker-alt" style="margin-right: 5px;"></i>HQ: Praha, CZ</a></li> {/* Static text */}
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; <span id="currentYear"></span> Justax AI Systems. Všechna práva vyhrazena. // Protokol v17.0 {/* Updated version */}
                 // Sestaveno s <i class="fas fa-heart" style="color: var(--accent-pink);"></i> v CZ.
            </div>
        </div>
    </footer>

    <script>
       // --- START: JavaScript for v17 (Cyber Core Enhanced) ---
       document.addEventListener('DOMContentLoaded', function() {
            // --- Variable Definitions ---
            const header = document.getElementById('header');
            const hamburger = document.getElementById('hamburger');
            const navLinks = document.getElementById('navLinks');
            const menuOverlay = document.getElementById('menuOverlay');
            const navItems = navLinks?.querySelectorAll('a.nav-item'); // Ensure selecting only links inside navLinks
            const body = document.body;
            const aiDemoOutput = document.getElementById('ai-demo-output');
            const aiProgressBar = document.getElementById('ai-progress-bar');
            const currentYearSpan = document.getElementById('currentYear');

            // --- Mobile Menu Logic ---
            const toggleMenu = (forceClose = false) => {
                 if (!hamburger || !navLinks || !menuOverlay) return;
                 const isActive = navLinks.classList.contains('active');
                 if (forceClose || isActive) {
                     hamburger.classList.remove('active');
                     navLinks.classList.remove('active');
                     menuOverlay.classList.remove('active');
                     body.classList.remove('menu-open');
                     hamburger.setAttribute('aria-expanded', 'false');
                 } else {
                     hamburger.classList.add('active');
                     navLinks.classList.add('active');
                     menuOverlay.classList.add('active');
                     body.classList.add('menu-open');
                     hamburger.setAttribute('aria-expanded', 'true');
                 }
            };
            // Event listeners for menu
            hamburger?.addEventListener('click', () => toggleMenu());
            menuOverlay?.addEventListener('click', () => toggleMenu(true)); // Close on overlay click
            navItems?.forEach(item => item.addEventListener('click', () => {
                 // Close menu only if it's an anchor link on the same page
                 if (item.getAttribute('href')?.startsWith('#')) {
                      toggleMenu(true);
                 }
            }));
            // Close menu with Escape key
            document.addEventListener('keydown', (e) => {
                 if (e.key === 'Escape' && navLinks?.classList.contains('active')) {
                     toggleMenu(true);
                 }
            });

            // --- Header Scroll Effect ---
            let lastScrollY = window.scrollY;
            const scrollHandler = () => {
                 if (!header) return;
                 const currentScrollY = window.scrollY;
                 if (currentScrollY > 50) { // Add scrolled class after scrolling down 50px
                     header.classList.add('scrolled');
                 } else {
                     header.classList.remove('scrolled');
                 }
                 // Optional: Hide header on scroll down, show on scroll up (currently commented out)
                 /*
                 if (currentScrollY > lastScrollY && currentScrollY > header.offsetHeight) {
                     header.style.transform = 'translateY(-100%)'; // Hide
                 } else {
                     header.style.transform = 'translateY(0)'; // Show
                 }
                 */
                 lastScrollY = currentScrollY;
            };
            window.addEventListener('scroll', scrollHandler, { passive: true });
            scrollHandler(); // Initial check on load

            // --- Intersection Observer Animations ---
            const animatedElements = document.querySelectorAll('[data-animate]');
            if ('IntersectionObserver' in window) {
                 const observer = new IntersectionObserver((entries, observer) => {
                     entries.forEach(entry => {
                         if (entry.isIntersecting) {
                             entry.target.classList.add('animated');
                             observer.unobserve(entry.target); // Animate only once
                         }
                     });
                 }, { threshold: 0.1 }); // Trigger when 10% is visible

                 animatedElements.forEach(element => observer.observe(element));
            } else { // Fallback for older browsers
                 animatedElements.forEach(element => element.classList.add('animated'));
            }

             // --- Smooth Scroll for Anchor Links ---
             document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                 anchor.addEventListener('click', function (e) {
                     const hrefAttribute = this.getAttribute('href');
                     // Ensure it's a valid anchor link on the page
                     if (hrefAttribute && hrefAttribute.length > 1 && hrefAttribute.startsWith('#')) {
                          try {
                               const targetElement = document.querySelector(hrefAttribute);
                               if (targetElement) {
                                   e.preventDefault();
                                   targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });

                                   // Optional: Update URL hash without jumping (uncomment if desired)
                                   // history.pushState(null, null, hrefAttribute);
                               }
                          } catch (error) {
                               console.error(`Error finding element for selector: ${hrefAttribute}`, error);
                          }
                     }
                 });
             });

            // --- Update Copyright Year ---
            if (currentYearSpan) {
                 currentYearSpan.textContent = new Date().getFullYear();
            }

            // --- Active Nav Link Highlighting on Scroll ---
            const sections = document.querySelectorAll('section[id]');
            let navUpdateTimeout;

            const updateActiveNav = () => {
                 if (!navItems || !header) return; // Ensure navItems and header exist
                 let currentSectionId = null;
                 const scrollPosition = window.scrollY + header.offsetHeight + 50; // Offset for header height + margin

                 sections.forEach(section => {
                     // Check if section exists and has an offsetTop
                     if (section && typeof section.offsetTop === 'number') {
                         if (scrollPosition >= section.offsetTop) {
                             currentSectionId = section.id;
                         }
                     }
                 });

                 navItems.forEach(item => {
                     item.classList.remove('active');
                     // Check href exists and matches currentSectionId
                     const itemHref = item.getAttribute('href');
                     if (itemHref && itemHref === `#${currentSectionId}`) {
                         item.classList.add('active');
                     }
                 });
            };

            // Debounce the scroll event for performance
            const debouncedNavUpdate = () => {
                 clearTimeout(navUpdateTimeout);
                 navUpdateTimeout = setTimeout(updateActiveNav, 50);
            };

            window.addEventListener('scroll', debouncedNavUpdate, { passive: true });
            window.addEventListener('resize', debouncedNavUpdate); // Update on resize too
            updateActiveNav(); // Initial check

             // --- AI Interface Demo Logic (v6 - Refined Simulation) ---
             if (aiDemoOutput && aiProgressBar) {
                 const demoSteps = [
                     { text: { type: 'ai', content: 'JX CORE v17 :: ONLINE :: READY'}, delay: 200 },
                     { progress: 5, delay: 150 },
                     { text: { type: 'user', content: 'Problém: Najdi diskriminant: 2x² + 5x - 3 = 0'}, delay: 1000 },
                     { progress: 15, delay: 200 },
                     { text: { type: 'analysis', content: 'Identifikace: Kvadratická rovnice. Požadavek: Výpočet diskriminantu (D).'}, delay: 500 },
                     { progress: 30, delay: 300 },
                     { text: { type: 'ai', content: 'Vzorec pro diskriminant: D = b² - 4ac', typing: true }, delay: 900 },
                     { progress: 40, delay: 200 },
                     { text: { type: 'analysis', content: 'Parametry: a=2, b=5, c=-3'}, delay: 400 },
                     { progress: 55, delay: 300 },
                     { text: { type: 'ai', content: 'Dosazení: D = (5)² - 4 * (2) * (-3)', typing: true }, delay: 1000 },
                     { progress: 70, delay: 200 },
                     { text: { type: 'ai', content: 'Výpočet: D = 25 - (-24) = 25 + 24', typing: true }, delay: 900 },
                     { progress: 85, delay: 200 },
                     { text: { type: 'ai', content: 'Výsledek: D = 49', typing: true }, delay: 600 },
                     { progress: 100, delay: 300 },
                     { text: { type: 'analysis', content: 'Úloha vyřešena. D > 0 => 2 reálné kořeny. Připraven na další příkaz...'}, delay: 800 },
                     { progress: 0, delay: 5000 } // Reset for loop, increased delay before restart
                 ];
                 let currentStepIndex = 0;
                 let charIndex = 0;
                 let typeInterval;
                 let sequenceTimeout;

                 // Basic HTML sanitizer (important to prevent XSS if content were dynamic)
                 // For real applications, use a robust library like DOMPurify.
                 function sanitizeHTML(str) {
                      const temp = document.createElement('div');
                      temp.textContent = str;
                      return temp.innerHTML.replace(/</g, "&lt;").replace(/>/g, "&gt;"); // Basic sanitization
                 }

                 function typeWriter(lineElement, text, speed = 35) { // Slightly adjusted default speed
                      if (!lineElement) return;
                      const textContainer = lineElement.querySelector('.text-content');
                      if (!textContainer) return;

                      if (charIndex < text.length) {
                           // Append next character and the cursor
                           textContainer.innerHTML = sanitizeHTML(text.substring(0, charIndex + 1)) + '<span class="typing-cursor"></span>';
                           charIndex++;
                           // Randomize speed slightly for more natural feel
                           const currentSpeed = speed + (Math.random() * speed * 0.5 - speed * 0.25); // +/- 25% variation
                           typeInterval = setTimeout(() => typeWriter(lineElement, text, speed), currentSpeed);
                      } else {
                           // Remove cursor when done typing
                           textContainer.innerHTML = sanitizeHTML(text);
                           clearTimeout(typeInterval);
                           // Schedule the next step *after* typing is complete
                           scheduleNextStep();
                      }
                  }

                 function addDemoLine(lineData) {
                     if(!aiDemoOutput) return; // Ensure output element exists

                     const lineElement = document.createElement('div');
                     // Add message type class (user, ai, analysis)
                     lineElement.className = `ai-demo-line ${lineData.type || 'ai'}`; // Default to 'ai'
                     lineElement.style.opacity = '0'; // Start transparent for fade-in
                     // Create a container for text to keep cursor adjacent
                     lineElement.innerHTML = `<span class="text-content"></span>`;

                     aiDemoOutput.appendChild(lineElement);

                     // Auto-scroll to bottom only if the user isn't scrolled up
                     const isScrolledToBottom = aiDemoOutput.scrollHeight - aiDemoOutput.clientHeight <= aiDemoOutput.scrollTop + 1;
                     if (isScrolledToBottom) {
                          aiDemoOutput.scrollTop = aiDemoOutput.scrollHeight;
                     }

                     // Fade in the new line
                     requestAnimationFrame(() => {
                         lineElement.style.opacity = '1';
                     });

                     // Handle typing effect or direct display
                     if (lineData.typing) {
                         // Start with just the cursor if typing
                         const textContainer = lineElement.querySelector('.text-content');
                         if(textContainer) textContainer.innerHTML = '<span class="typing-cursor"></span>';
                         charIndex = 0; // Reset char index for this line
                         clearTimeout(typeInterval); // Clear previous typing interval
                         // Start typing after a short delay
                         setTimeout(() => typeWriter(lineElement, lineData.content), 100); // Slightly longer delay before typing starts
                         // IMPORTANT: Don't schedule next step here; typeWriter handles it on completion
                     } else {
                         // Display text directly if not typing
                         const textContainer = lineElement.querySelector('.text-content');
                          if(textContainer) textContainer.textContent = lineData.content;
                         // Schedule the next step immediately as there's no typing delay
                         scheduleNextStep();
                     }
                 }

                 function updateProgressBar(percentage) {
                     if(aiProgressBar) {
                          aiProgressBar.style.width = `${percentage}%`;
                     }
                 }

                 function runNextStep() {
                     // Check if we've reached the end of the steps
                     if (currentStepIndex >= demoSteps.length) {
                          // Schedule a restart after a delay
                         sequenceTimeout = setTimeout(() => {
                             if(aiDemoOutput) aiDemoOutput.innerHTML = ''; // Clear the log
                             updateProgressBar(0); // Reset progress bar
                             currentStepIndex = 0; // Reset index
                             runNextStep(); // Start over
                         }, demoSteps[demoSteps.length - 1]?.delay || 5000); // Use last step's delay for restart timing
                         return; // Stop execution for this cycle
                     }

                     const step = demoSteps[currentStepIndex];
                     let blockExecution = false; // Flag to indicate if we need to wait (e.g., for typing)

                     // Update progress bar if defined
                     if (step.progress !== undefined) {
                         updateProgressBar(step.progress);
                     }

                     // Add text line if defined
                     if (step.text) {
                         addDemoLine(step.text);
                         blockExecution = step.text.typing; // Block further scheduling if this step involves typing
                     }

                     currentStepIndex++; // Move to the next step index

                     // If the current step didn't block execution (e.g., wasn't a typing step), schedule the next one immediately based on *its* delay
                     if (!blockExecution) {
                          scheduleNextStep();
                     }
                  }

                  // Schedules the execution of the *next* step based on its delay
                  function scheduleNextStep() {
                       // Ensure we don't schedule past the end or double schedule
                       clearTimeout(sequenceTimeout);

                       if (currentStepIndex < demoSteps.length) {
                           // Get the delay for the *upcoming* step (the one at currentStepIndex)
                           const nextStepDelay = demoSteps[currentStepIndex]?.delay || 250; // Default delay
                           // Set timeout to run the *next* step after its specified delay
                           sequenceTimeout = setTimeout(runNextStep, nextStepDelay);
                       } else {
                           // If no more steps, trigger the restart logic in runNextStep
                           runNextStep();
                       }
                   }

                 // Initial Start: Clear output, reset progress, start the sequence
                 if(aiDemoOutput && aiProgressBar) {
                      aiDemoOutput.innerHTML = ''; // Clear previous content
                      updateProgressBar(0);
                      currentStepIndex = 0;
                      runNextStep(); // Start the simulation
                 }
            }
            // --- End AI Interface Logic ---

       });
       // --- END: JavaScript ---
    </script>
    </body>
</html>
