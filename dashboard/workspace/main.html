<!DOCTYPE html>
<html lang="cs" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Justax - Přehled Procvičování // Cosmic Neuro</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@400;500;600;700&family=Poppins:wght@400;500;600&family=Inter:wght@400;500&family=Roboto+Mono:wght@400;500&family=Audiowide&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tooltipster/4.2.8/css/tooltipster.bundle.min.css">

    <script>
        // --- MathJax Configuration ---
        if (typeof window.MathJax === 'undefined') {
            window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$']], processEscapes: true }, svg: { fontCache: 'global' }, options: { ignoreHtmlClass: 'tex2jax_ignore', processHtmlClass: 'tex2jax_process' }, startup: { ready: () => { console.log('[MathJax] Ready (main.html).'); MathJax.startup.defaultReady(); } } };
        }
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body class="new-vyuka-layout">

    <div class="initial-loading-overlay" id="initial-loader">
         <div class="loading-spinner"></div>
         <p>SYNCHRONIZACE PROCVIČOVÁNÍ...</p>
    </div>

    <div class="offline-banner" id="offline-banner" style="display: none;">
         <i class="fas fa-plug"></i> OFFLINE // SPOJENÍ ZTRACENO.
    </div>

    <aside class="vyuka-sidebar-ai" id="sidebar">
        <div class="vyuka-sidebar-ai-header">
            <a href="../dashboard.html" class="vyuka-sidebar-ai-logo"><i class="fas fa-atom"></i> <span class="logo-text">Justax</span></a>
        </div>
        <ul class="vyuka-sidebar-ai-menu">
            <li class="vyuka-sidebar-ai-item" title="Nástěnka"><a href="../dashboard.html" class="vyuka-sidebar-ai-link"><i class="fas fa-tachometer-alt"></i><span class="link-text">Nástěnka</span></a></li>
            <li class="vyuka-sidebar-ai-item" title="Procvičování"><a href="main.html" class="vyuka-sidebar-ai-link active"><i class="fas fa-laptop-code"></i><span class="link-text">Procvičování</span></a></li>
            <li class="vyuka-sidebar-ai-item" title="Pokrok"><a href="../pokrok.html" class="vyuka-sidebar-ai-link"><i class="fas fa-chart-line"></i><span class="link-text">Pokrok</span></a></li>
            <li class="vyuka-sidebar-ai-item" title="Ocenění"><a href="../oceneni.html" class="vyuka-sidebar-ai-link"><i class="fas fa-medal"></i><span class="link-text">Ocenění</span></a></li>
            <li class="vyuka-sidebar-ai-item" title="Profil"><a href="../community/profile.html" class="vyuka-sidebar-ai-link"><i class="fas fa-user-astronaut"></i><span class="link-text">Profil</span></a></li>
        </ul>
        <div class="vyuka-sidebar-ai-footer">
             &copy; <span id="currentYearSidebar">2025</span> Justax Systems
        </div>
    </aside>
    <div class="sidebar-overlay-ai" id="sidebar-overlay"></div>

    <div class="vyuka-page-container">
        <header class="vyuka-header">
            <div class="vyuka-header-left">
                <button class="mobile-menu-toggle" id="main-mobile-menu-toggle"><i class="fas fa-bars"></i></button>
                <button class="sidebar-ai-desktop-toggle" id="sidebar-toggle-btn" title="Sbalit panel"><i class="fas fa-chevron-left"></i></button>
                <div class="vyuka-header-page-title-container">
                    <h1 id="dashboard-title"><i class="fas fa-laptop-code"></i> Procvičování</h1>
                    <p id="user-goal-display" style="display: none;"></p>
                </div>
            </div>
            <div class="vyuka-header-right">
                <div class="header-stats">
                    <div class="header-stat-item" id="header-stat-level" title="Vaše úroveň">
                        <span class="stat-label">LVL</span>
                        <strong id="header-stat-level-value">-</strong>
                    </div>
                    <div class="header-stat-item" id="header-stat-xp" title="Zkušenosti">
                        <i class="fas fa-star"></i>
                        <div class="progress-bar-container"><div class="progress-bar-fill" id="header-stat-xp-fill"></div></div>
                    </div>
                    <div class="header-stat-item" id="header-stat-credits" title="Kredity">
                        <i class="fas fa-coins"></i>
                        <strong id="header-stat-credits-value">-</strong>
                    </div>
                </div>

                <div class="notifications">
                    <div class="notification-bell" id="notification-bell" title="Oznámení">
                         <i class="far fa-bell"></i>
                         <span class="notification-badge" id="notification-count">0</span>
                    </div>
                    <div class="notifications-dropdown-wrapper" id="notifications-dropdown">
                         <div class="notifications-header">
                             <span class="notifications-title">Oznámení</span>
                             <button class="btn btn-sm btn-secondary" id="mark-all-read">Označit jako přečtené</button>
                         </div>
                         <div id="notifications-list"></div>
                         <div class="notifications-footer">
                             <a href="../notifications.html" class="view-all-notifications-link">Zobrazit Vše</a>
                         </div>
                    </div>
                 </div>

                <div class="user-menu-container">
                    <div class="vyuka-header-user-display">
                        <div class="vyuka-header-user-avatar-wrapper" id="header-avatar-wrapper"><span>?</span></div>
                        <div class="vyuka-header-user-details">
                            <span class="vyuka-header-user-name" id="header-user-name">Načítání...</span>
                            <span class="vyuka-header-user-title" id="header-user-title">...</span>
                        </div>
                    </div>
                    <div class="user-dropdown-menu">
                         <ul class="user-dropdown-links">
                            <li><a href="../community/profile.html"><i class="fas fa-user-astronaut"></i> Veřejný Profil</a></li>
                            <li><a href="../settings.html"><i class="fas fa-cog"></i> Nastavení</a></li>
                        </ul>
                        <button class="btn btn-danger btn-sm logout-btn" id="logout-btn"><i class="fas fa-power-off"></i> Odhlásit se</button>
                    </div>
                </div>
            </div>
        </header>

        <div class="vyuka-main-content-scrollable" id="main-content">
            <main class="vyuka-main-content">
                <div class="error-container" id="global-error" style="display: none;"></div>

                <div class="diagnostic-prompt card" id="diagnostic-prompt" data-animate style="display: none;">
                    <i class="fas fa-exclamation-circle" aria-hidden="true"></i>
                    <p>Pro odemčení personalizovaného obsahu a studijního plánu je potřeba absolvovat <strong>diagnostický test</strong>.</p>
                    <a href="../diagnostic/test1.html" class="btn btn-primary" id="start-test-btn-prompt"><i class="fas fa-play" aria-hidden="true"></i> Spustit test</a>
                </div>

                <div class="tabs-wrapper" id="tabs-wrapper" style="display: none;">
                    <div class="content-tabs" id="content-tabs" role="tablist" aria-label="Sekce procvičování">
                        <button class="plan-tab active" data-tab="practice-tab" role="tab" aria-selected="true" aria-controls="practice-tab-content" id="tab-btn-practice">
                            <i class="fas fa-globe" aria-hidden="true"></i> Obecné
                        </button>
                        <button class="plan-tab" data-tab="current" role="tab" aria-selected="false" aria-controls="currentPlanSection" id="tab-btn-current">
                            <i class="fas fa-route" aria-hidden="true"></i> Plán
                        </button>
                        <button class="plan-tab" data-tab="vyuka-tab" role="tab" aria-selected="false" aria-controls="vyuka-tab-content" id="tab-btn-vyuka">
                            <i class="fas fa-person-chalkboard" aria-hidden="true"></i> Výuka
                        </button>
                    </div>
                </div>
                
                <div class="tab-content-container" id="main-tab-content-area" style="display: block;">
                    <div class="tab-content active" id="practice-tab-content" role="tabpanel" aria-labelledby="tab-btn-practice">
                         <section class="shortcuts-section">
                            <h2 class="section-title" data-animate style="--animation-order: 1;"><i class="fas fa-rocket" aria-hidden="true"></i>Rychlé Akce</h2>
                            <div class="shortcut-grid" id="shortcuts-grid">
                                <a href="../diagnostic/test1.html" class="card shortcut-card" data-animate style="--animation-order: 2;">
                                    <div class="shortcut-icon"><i class="fas fa-diagnoses"></i></div>
                                    <h3 class="shortcut-title">Nový Test</h3>
                                    <p class="shortcut-desc">Spusťte diagnostický nebo cvičný test.</p>
                                </a>
                                <a href="../plan/plan.html" class="card shortcut-card" data-animate style="--animation-order: 3;">
                                    <div class="shortcut-icon"><i class="fas fa-route"></i></div>
                                    <h3 class="shortcut-title">Studijní Plán</h3>
                                    <p class="shortcut-desc">Pokračujte ve svém aktuálním plánu.</p>
                                </a>
                                <a href="../vyuka/vyuka.html" class="card shortcut-card" data-animate style="--animation-order: 4;">
                                    <div class="shortcut-icon"><i class="fas fa-robot"></i></div>
                                    <h3 class="shortcut-title">AI Výuka</h3>
                                    <p class="shortcut-desc">Učte se s interaktivním AI tutorem.</p>
                                </a>
                                 <a href="../pokrok.html" class="card shortcut-card" data-animate style="--animation-order: 5;">
                                    <div class="shortcut-icon"><i class="fas fa-chart-line"></i></div>
                                    <h3 class="shortcut-title">Můj Pokrok</h3>
                                    <p class="shortcut-desc">Sledujte své statistiky a zlepšení.</p>
                                </a>
                            </div>
                         </section>
    
                        <section class="section card data-table-section" id="topic-progress-section" data-animate style="--animation-order: 6;">
                            <div class="loading-overlay hidden" id="topic-progress-table-loading-overlay"> <div class="loading-spinner"></div> </div>
                            <div class="data-table-header">
                                <h2 class="section-title data-table-title"><i class="fas fa-layer-group" aria-hidden="true"></i>Pokrok v Tématech</h2>
                            </div>
                            <div class="table-responsive">
                                <table class="data-table" id="topic-progress-table" style="display: none;" aria-label="Přehled pokroku v tématech">
                                    <thead><tr><th data-sort="topic_name" scope="col">Téma</th><th data-sort="progress_percentage" scope="col">Pokrok (%)</th><th data-sort="last_studied_at" scope="col">Naposledy Studováno</th></tr></thead>
                                    <tbody id="topic-progress-body"></tbody>
                                </table>
                            </div>
                            <div class="empty-state" id="topic-progress-empty-state" style="display: none;">
                                <i class="fas fa-book-reader" aria-hidden="true"></i>
                                 <h3>Žádná data o pokroku</h3>
                                <p>Zatím nemáte zaznamenaný žádný pokrok v tématech. Začněte procvičovat!</p>
                            </div>
                        </section>
                    </div>

                    <div class="section" id="currentPlanSection" style="display:none;" role="tabpanel" aria-labelledby="tab-btn-current">
                        <div class="loader-container visible-loader" id="currentPlanLoader" style="display: none;">
                            <div class="loading-spinner"></div><p>Načítám aktuální plán...</p>
                        </div>
                        <div id="currentPlanEmptyState" class="section-content" style="display:none;"></div>
                    </div>
                    
                    <div class="tab-content" id="vyuka-tab-content" style="display:none;" role="tabpanel" aria-labelledby="tab-btn-vyuka">
                         <section class="vyuka-section card">
                            <h2 class="section-title"><i class="fas fa-person-chalkboard" aria-hidden="true"></i>Výuka s AI</h2>
                            <div class="empty-state" style="display:flex;">
                                <i class="fas fa-robot empty-state-icon" aria-hidden="true"></i>
                                <h3>AI Výukový Modul</h3>
                                <p>Zde můžete procházet výukové lekce s naším AI tutorem Justaxem. Lekce jsou přizpůsobeny vašemu studijnímu plánu a pokroku.</p>
                                 <a href="../vyuka/vyuka.html" class="btn btn-primary" style="margin-top: 1rem;">
                                    <i class="fas fa-book-open" aria-hidden="true"></i> Spustit výuku
                                </a>
                            </div>
                        </section>
                    </div>

                </div>
            </main>
            
            <footer class="main-footer vyuka-footer">
                <div class="container">
                    <div class="footer-grid">
                        <div class="footer-column">
                            <a href="../dashboard.html" class="logo" aria-label="Justax Domů"><i class="fas fa-atom" aria-hidden="true"></i> <span>Justax</span></a>
                            <p>AI Augmentace Vzdělávání a Osobního Rozvoje.</p>
                            <div class="social-links" aria-label="Sociální sítě">
                                 <a href="https://t.me/justaxspace" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Telegram"><i class="fab fa-telegram-plane" aria-hidden="true"></i></a>
                                 <a href="https://www.instagram.com/learnwithjustax/" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Instagram"><i class="fab fa-instagram" aria-hidden="true"></i></a>
                                 <a href="mailto:admin@justax.space" class="social-link" aria-label="Email"><i class="fas fa-envelope"></i></a>
                            </div>
                        </div>
                        <div class="footer-column">
                            <h3>Navigace</h3>
                            <ul class="footer-links">
                                <li><a href="../dashboard.html"><i class="fas fa-tachometer-alt"></i> Nástěnka</a></li>
                                <li><a href="main.html"><i class="fas fa-laptop-code"></i> Procvičování</a></li>
                                <li><a href="../oceneni.html"><i class="fas fa-medal"></i> Ocenění</a></li>
                                <li><a href="../settings.html"><i class="fas fa-cog"></i> Nastavení</a></li>
                            </ul>
                        </div>
                        <div class="footer-column">
                            <h3>Podpora</h3>
                            <ul class="footer-links">
                                <li><a href="../../privacy-policy.html"><i class="fas fa-shield-alt"></i> Ochrana Údajů</a></li>
                                <li><a href="../../terms.html"><i class="fas fa-file-contract"></i> Podmínky Použití</a></li>
                                <li><a href="mailto:podpora@justax.space"><i class="fas fa-headset"></i> Kontaktovat Podporu</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-copyright">
                        &copy; <span id="currentYearFooter">2025</span> Justax Systems // Procvičování
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <div class="modal" id="goal-selection-modal" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="goal-modal-title-main">
         </div>
    
    <div class="toast-container" id="toastContainer"></div>
    <div id="mouse-follower" class="mouse-follower-glow"></div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="main.js" defer></script> 
</body>
</html>