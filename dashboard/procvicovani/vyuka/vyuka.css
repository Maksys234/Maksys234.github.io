/* dashboard/procvicovani/vyuka/vyuka.css - ULTIMATE CYBERPUNK OVERHAUL v2 */

/* --- Základní proměnné a reset --- */
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Rajdhani:wght@400;500;700&family=Audiowide&display=swap');

:root {
    --vyuka-font-primary: 'Rajdhani', sans-serif;
    --vyuka-font-secondary: 'Orbitron', sans-serif;
    --vyuka-font-accent: 'Audiowide', cursive;
    --vyuka-font-mono: 'Roboto Mono', monospace;

    --vyuka-bg-dark: #03050A;
    --vyuka-bg-panel: #0D0F1A;
    --vyuka-bg-panel-translucent: rgba(15, 18, 30, 0.85);
    --vyuka-bg-panel-lighter: #1A1C2C;
    --vyuka-border-color: #2A2F45;
    --vyuka-border-glow-soft: rgba(var(--vyuka-accent-secondary-rgb), 0.3);
    --vyuka-border-glow-hard: rgba(var(--vyuka-accent-primary-rgb), 0.7);

    --vyuka-accent-primary: #F800FF; /* Zářivá fialovo-růžová */
    --vyuka-accent-primary-rgb: 248, 0, 255;
    --vyuka-accent-secondary: #00F0FF; /* Zářivá tyrkysová */
    --vyuka-accent-secondary-rgb: 0, 240, 255;
    --vyuka-accent-tertiary: #FFD700; /* Zlatá/žlutá pro kontrasty */
    --vyuka-accent-tertiary-rgb: 255, 215, 0;
    --vyuka-accent-error: #FF3333;
    --vyuka-accent-success: #6FFF3A;

    --vyuka-text-primary: #EAEFFC;
    --vyuka-text-secondary: #A8BCDA;
    --vyuka-text-muted: #6A7B9D;
    --vyuka-text-heading: var(--vyuka-text-primary);
    --vyuka-text-link: var(--vyuka-accent-secondary);
    --vyuka-text-link-hover: var(--vyuka-text-primary);

    --vyuka-sidebar-width-expanded: 220px;
    --vyuka-sidebar-width-collapsed: 52px;
    --vyuka-header-height: 52px;
    --vyuka-footer-height: auto; /* Dynamická výška */

    --vyuka-card-radius: 4px; /* Ostřejší */
    --vyuka-button-radius: 3px;

    --vyuka-panel-shadow:
        0 0 10px rgba(var(--vyuka-accent-secondary-rgb), 0.2),
        0 0 20px rgba(var(--vyuka-accent-primary-rgb), 0.15),
        inset 0 0 15px rgba(var(--vyuka-bg-dark), 0.5);
    --vyuka-text-glow-primary: 0 0 3px var(--vyuka-accent-primary), 0 0 6px var(--vyuka-accent-primary);
    --vyuka-text-glow-secondary: 0 0 3px var(--vyuka-accent-secondary), 0 0 6px var(--vyuka-accent-secondary);

    --vyuka-chat-input-gradient: linear-gradient(160deg, rgba(var(--vyuka-accent-pink-rgb), 0.8) -10%, rgba(var(--vyuka-accent-primary-rgb), 0.9) 90%);
    --vyuka-send-button-gradient: linear-gradient(60deg, var(--vyuka-accent-secondary), var(--vyuka-accent-primary));

    /* Animace */
    --animation-duration-fast: 0.2s;
    --animation-duration-medium: 0.4s;
    --animation-duration-slow: 0.8s;
    --animation-timing-cyber: cubic-bezier(0.175, 0.885, 0.320, 1.275); /* bounce */
    --animation-timing-glitch: steps(2, jump-both);
}

*, *::before, *::after { box-sizing: border-box; }
body.new-vyuka-layout { font-family: var(--vyuka-font-primary); background-color: var(--vyuka-bg-dark); color: var(--vyuka-text-primary); margin: 0; padding: 0; display: flex; overflow: hidden; height: 100vh; font-size: 15px; /* Base font size */ }
body.new-vyuka-layout::-webkit-scrollbar { width: 10px; height: 10px; }
body.new-vyuka-layout::-webkit-scrollbar-track { background: var(--vyuka-bg-dark); }
body.new-vyuka-layout::-webkit-scrollbar-thumb { background-color: var(--vyuka-accent-primary); border-radius: 5px; border: 2px solid var(--vyuka-bg-dark); }
body.new-vyuka-layout::-webkit-scrollbar-thumb:hover { background-color: var(--vyuka-accent-secondary); }
h1, h2, h3 { font-family: var(--vyuka-font-secondary); color: var(--vyuka-text-heading); text-shadow: var(--vyuka-text-glow-secondary); margin:0; }
a { color: var(--vyuka-text-link); text-decoration: none; transition: color var(--animation-duration-fast) ease, text-shadow var(--animation-duration-fast) ease; }
a:hover { color: var(--vyuka-text-link-hover); text-shadow: 0 0 8px var(--vyuka-text-link-hover); }

/* --- ÚPLNĚ NOVÁ NAČÍTACÍ ANIMACE --- */
.initial-loading-overlay { position: fixed; inset: 0; background-color: var(--vyuka-bg-dark); z-index: 1100; display: flex; justify-content: center; align-items: center; flex-direction: column; gap: 2rem; transition: opacity 0.6s ease-out 0.3s, visibility 0s 0.9s; }
.initial-loading-overlay.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
.loading-spinner { width: 100px; height: 100px; position: relative; }
.loading-spinner .spinner-blade {
    position: absolute; left: 46.5%; top: 0;
    width: 7%; height: 30%;
    background-color: var(--vyuka-accent-secondary);
    border-radius: 50%/20%;
    opacity: 0;
    transform-origin: 50% 100%; /* Rotace kolem středu spinneru */
    animation: blade-spin 1.2s linear infinite;
    box-shadow: 0 0 3px var(--vyuka-accent-secondary), 0 0 6px var(--vyuka-accent-secondary), 0 0 9px var(--vyuka-accent-primary);
}
@keyframes blade-spin {
  0%, 100% { opacity: 1; transform: rotate(0deg) translateY(-20px); background-color: var(--vyuka-accent-secondary); }
  25% { background-color: var(--vyuka-accent-primary); }
  50% { opacity: 0.2; transform: rotate(180deg) translateY(-20px); background-color: var(--vyuka-accent-pink); }
  75% { background-color: var(--vyuka-accent-primary); }
}
.loading-spinner .spinner-blade:nth-child(1) { animation-delay: 0s; transform: rotate(0deg) translateY(-20px); }
.loading-spinner .spinner-blade:nth-child(2) { animation-delay: -0.15s; transform: rotate(30deg) translateY(-20px); }
.loading-spinner .spinner-blade:nth-child(3) { animation-delay: -0.3s; transform: rotate(60deg) translateY(-20px); }
.loading-spinner .spinner-blade:nth-child(4) { animation-delay: -0.45s; transform: rotate(90deg) translateY(-20px); }
.loading-spinner .spinner-blade:nth-child(5) { animation-delay: -0.6s; transform: rotate(120deg) translateY(-20px); }
.loading-spinner .spinner-blade:nth-child(6) { animation-delay: -0.75s; transform: rotate(150deg) translateY(-20px); }
.loading-spinner .spinner-blade:nth-child(7) { animation-delay: -0.9s; transform: rotate(180deg) translateY(-20px); }
.loading-spinner .spinner-blade:nth-child(8) { animation-delay: -1.05s; transform: rotate(210deg) translateY(-20px); }
/* Core Pulsing Element */
.loading-spinner::after {
    content: ''; position: absolute; width: 20px; height: 20px;
    background-color: var(--vyuka-accent-tertiary); border-radius: 50%;
    top: 50%; left: 50%; transform: translate(-50%, -50%);
    box-shadow: 0 0 10px var(--vyuka-accent-tertiary), 0 0 20px var(--vyuka-accent-tertiary);
    animation: core-pulse 1.2s ease-in-out infinite alternate;
}
@keyframes core-pulse { 0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.7; } 100% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; } }

p.loading-text { color: var(--vyuka-text-secondary); font-size: 0.9rem; font-family: var(--vyuka-font-mono); text-transform: uppercase; letter-spacing: 3px; margin-top: 2.5rem; display: flex; position: relative; }
p.loading-text span { opacity: 0; animation: glitch-letter 0.2s steps(1) forwards, text-color-cycle 3s linear infinite alternate; display: inline-block; text-shadow: var(--vyuka-text-glow-secondary); }
@keyframes glitch-letter { 0% { transform: translate(2px, -1px) skewX(-10deg); } 25% { transform: translate(-1px, 1px) skewX(5deg); } 50% { transform: translate(1px, 0px) skewX(-3deg); } 75% { transform: translate(0px, -1px) skewX(8deg); } 100% { transform: translate(0,0) skewX(0); opacity:1; } }
@keyframes text-color-cycle { 0%, 100% { color: var(--vyuka-accent-secondary); text-shadow: var(--vyuka-text-glow-secondary); } 33% { color: var(--vyuka-accent-primary); text-shadow: var(--vyuka-text-glow-primary); } 66% { color: var(--vyuka-accent-pink); text-shadow: 0 0 3px var(--vyuka-accent-pink), 0 0 6px var(--vyuka-accent-pink); } }
/* Delay pro každé písmeno */
p.loading-text span:nth-child(1) { animation-delay: 0.1s; } p.loading-text span:nth-child(2) { animation-delay: 0.15s; } p.loading-text span:nth-child(3) { animation-delay: 0.2s; } /* A tak dále pro všechny Spany */
/* Pro "SYNCHRONIZUJI MODUL..." (22 znaků včetně mezer a teček) */
p.loading-text span:nth-child(4) { animation-delay: 0.25s; } p.loading-text span:nth-child(5) { animation-delay: 0.3s; } p.loading-text span:nth-child(6) { animation-delay: 0.35s; } p.loading-text span:nth-child(7) { animation-delay: 0.4s; } p.loading-text span:nth-child(8) { animation-delay: 0.45s; } p.loading-text span:nth-child(9) { animation-delay: 0.5s; } p.loading-text span:nth-child(10) { animation-delay: 0.55s; } p.loading-text span:nth-child(11) { animation-delay: 0.6s; } p.loading-text span:nth-child(12) { animation-delay: 0.65s; } p.loading-text span:nth-child(13) { animation-delay: 0.7s; } p.loading-text span:nth-child(14) { animation-delay: 0.75s; } p.loading-text span:nth-child(15) { animation-delay: 0.8s; } p.loading-text span:nth-child(16) { animation-delay: 0.85s; } p.loading-text span:nth-child(17) { animation-delay: 0.9s; } p.loading-text span:nth-child(18) { animation-delay: 0.95s; } p.loading-text span:nth-child(19) { animation-delay: 1.0s; } p.loading-text span:nth-child(20) { animation-delay: 1.05s; } p.loading-text span:nth-child(21) { animation-delay: 1.1s; } p.loading-text span:nth-child(22) { animation-delay: 1.15s; }

/* --- Levý AI Panel --- */
.vyuka-sidebar-ai { width: var(--vyuka-sidebar-width-collapsed); background-color: var(--vyuka-bg-panel); display: flex; flex-direction: column; padding: 0.7rem 0.35rem; transition: width 0.3s var(--animation-timing-cyber); height: 100vh; position: fixed; top: 0; left: 0; z-index: 1000; border-right: 1px solid transparent; /* Border bude přes ::after */ }
.vyuka-sidebar-ai::after { content:''; position: absolute; top:0; right:-1px; width:2px; height:100%; background: linear-gradient(to bottom, transparent, var(--vyuka-accent-secondary) 50%, var(--vyuka-accent-primary) 70%, transparent); animation: sidebar-border-scan 8s linear infinite; box-shadow: 0 0 5px var(--vyuka-accent-secondary), 0 0 10px var(--vyuka-accent-primary); }
@keyframes sidebar-border-scan { 0% { transform: translateY(-100%); } 50% { transform: translateY(0%); } 100% { transform: translateY(100%); } }
.vyuka-sidebar-ai.expanded { width: var(--vyuka-sidebar-width-expanded); }
.vyuka-sidebar-ai-header { text-align: center; margin-bottom: 1rem; padding: 0.3rem 0; display:flex; align-items:center; justify-content:center; }
.vyuka-sidebar-ai-logo i { color: var(--vyuka-accent-secondary); font-size: 1.8rem; text-shadow: var(--vyuka-glow-secondary); animation: logo-pulse 2s infinite ease-in-out; }
@keyframes logo-pulse { 0%,100% {transform:scale(1); text-shadow: var(--vyuka-glow-secondary);} 50% {transform:scale(1.1); text-shadow: 0 0 8px var(--vyuka-accent-secondary), 0 0 15px var(--vyuka-accent-primary);} }
.vyuka-sidebar-ai-link { border: 1px solid transparent; }
.vyuka-sidebar-ai-link:hover { background-color: rgba(var(--vyuka-accent-secondary-rgb), 0.15); color: var(--vyuka-accent-secondary); border-color: var(--vyuka-accent-secondary); box-shadow: inset 0 0 12px rgba(var(--vyuka-accent-secondary-rgb), 0.25), 0 0 10px rgba(var(--vyuka-accent-secondary-rgb), 0.4); text-shadow: 0 0 5px var(--vyuka-accent-secondary); transform: perspective(300px) rotateY(5deg) scale(1.02); }
.vyuka-sidebar-ai-link.active { background: var(--vyuka-accent-primary); color: var(--vyuka-bg-dark); box-shadow: 0 0 15px var(--vyuka-glow-primary), inset 0 0 8px rgba(var(--vyuka-bg-dark),0.4); border-color: var(--vyuka-accent-primary); text-shadow: none; }
.vyuka-sidebar-ai-link.active i { text-shadow: none; }

/* --- Horní Header --- */
.vyuka-header { height: var(--vyuka-header-height); background-color: var(--vyuka-bg-panel); display: flex; align-items: center; justify-content: space-between; padding: 0 1rem; flex-shrink: 0; border-bottom: 1px solid transparent; position:relative; }
.vyuka-header::after { content:''; position: absolute; bottom:-1px; left:0; width:100%; height:2px; background: linear-gradient(to right, transparent, var(--vyuka-accent-secondary) 30%, var(--vyuka-accent-primary) 70%, transparent); animation: header-border-scan 10s linear infinite; box-shadow: 0 0 5px var(--vyuka-accent-secondary), 0 0 10px var(--vyuka-accent-primary); }
@keyframes header-border-scan { 0% { transform: translateX(-100%); } 50% { transform: translateX(0%); } 100% { transform: translateX(100%); } }
.vyuka-header-topic-info h1 { text-shadow: 0 0 3px var(--vyuka-text-heading); }
.vyuka-header-topic-info p { text-shadow: 0 0 2px var(--vyuka-text-secondary); }
.vyuka-header-right .btn-icon-only { background: rgba(var(--vyuka-bg-panel-lighter-rgb), 0.5); border: 1px solid var(--vyuka-border-color); }
.vyuka-header-right .btn-icon-only:hover { background-color: rgba(var(--vyuka-accent-secondary-rgb),0.2); color: var(--vyuka-accent-secondary); text-shadow: var(--vyuka-glow-secondary); box-shadow: 0 0 10px rgba(var(--vyuka-accent-secondary-rgb),0.3); }
.vyuka-header-right .notification-bell i { animation: bell-ring 4s infinite ease-in-out 1s; }
@keyframes bell-ring { 0%, 10%, 20%, 100% {transform:rotate(0);} 5%, 15% {transform:rotate(10deg);} 7.5%, 17.5% {transform:rotate(-10deg);} }
.vyuka-header-user-display { border: 1px solid var(--vyuka-border-color); padding: 0.2rem 0.5rem; border-radius: var(--vyuka-button-radius); background: rgba(var(--vyuka-bg-panel-lighter-rgb),0.3); box-shadow: inset 0 0 5px rgba(0,0,0,0.2); }
.vyuka-header-user-title { text-shadow: 0 0 4px var(--vyuka-accent-secondary); }

/* --- Hlavní Obsah (Gigantický) --- */
.vyuka-page-container { overflow-y: auto; /* Hlavní scrollbar stránky */ }
.vyuka-main-content { display: flex; flex-grow: 1; padding: 2rem; gap: 2rem; background-color: transparent; /* Pozadí s gridem bude pod */ min-height: calc(100vh - var(--vyuka-header-height) - var(--vyuka-footer-height) - 4rem); /* (4rem = součet paddingů .vyuka-main-content) */ position: relative; overflow: visible; /* Aby panely mohly mít vnější glow */ }
.vyuka-main-content::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-image: linear-gradient(rgba(var(--vyuka-border-color), 0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(var(--vyuka-border-color), 0.08) 1px, transparent 1px); background-size: 25px 25px; opacity: 0.7; z-index: 0; pointer-events: none; animation: bg-grid-move 60s linear infinite; }
@keyframes bg-grid-move { 0% {background-position: 0 0;} 100% {background-position: 500px 500px;} }

.vyuka-whiteboard-area { flex: 12; /* Whiteboard je masivní */ background-color: var(--vyuka-bg-panel-translucent); backdrop-filter: blur(8px); padding: 2rem; display: flex; flex-direction: column; min-height: 0; overflow: hidden; }
#whiteboard-container { flex-grow: 1; overflow-y: auto; padding-right: 12px; margin-right: -12px; position: relative; min-height: 0; }
.vyuka-chat-panel { flex: 4; background-color: var(--vyuka-bg-panel-translucent); backdrop-filter: blur(8px); padding: 0; display: flex; flex-direction: column; min-width: 320px; min-height: 0; overflow: hidden; }

/* --- Design Chatu --- */
.chat-input-wrapper { background: var(--vyuka-chat-input-gradient); box-shadow: inset 0 1px 5px rgba(0,0,0,0.5), 0 0 18px rgba(var(--vyuka-accent-pink-rgb),0.4), 0 0 25px rgba(var(--vyuka-accent-primary-rgb),0.3); border: 1px solid var(--vyuka-accent-primary); }
.chat-input { background: rgba(var(--vyuka-bg-dark), 0.7); color: var(--vyuka-text-primary); border-radius: calc(var(--vyuka-button-radius) - 1px); }
.send-button { background: var(--vyuka-send-button-gradient); color: var(--vyuka-bg-dark); text-shadow: 0 0 3px rgba(var(--vyuka-bg-dark),0.5); box-shadow: 0 2px 10px rgba(var(--vyuka-accent-primary-rgb),0.5); }
.send-button:hover:not(:disabled) { filter: brightness(1.4) saturate(1.4); transform: scale(1.1) rotate(-15deg); box-shadow: 0 5px 15px rgba(var(--vyuka-accent-secondary-rgb),0.6); }
.message-bubble { backdrop-filter: blur(3px); }
.message-bubble.user-message { background: linear-gradient(135deg, rgba(var(--vyuka-accent-pink-rgb),0.6), rgba(var(--vyuka-accent-primary-rgb),0.75)); border-top-right-radius: 0; border-bottom-left-radius: var(--vyuka-card-radius); box-shadow: 0 3px 10px rgba(var(--vyuka-accent-pink-rgb), 0.2), 0 0 12px rgba(var(--vyuka-accent-primary-rgb), 0.15), inset 0 0 5px rgba(255,255,255,0.1); }
.message-bubble.model-message { background-color: rgba(var(--vyuka-bg-panel-lighter-rgb), 0.7); border: 1px solid var(--vyuka-border-color); border-top-left-radius: 0; border-bottom-right-radius: var(--vyuka-card-radius); box-shadow: 0 2px 8px rgba(0,0,0,0.3), inset 0 0 8px rgba(0,0,0,0.2); }
.chat-controls button:hover:not(:disabled) { background-color: rgba(var(--vyuka-accent-primary-rgb), 0.2); color: var(--vyuka-accent-primary); text-shadow: 0 0 5px var(--vyuka-accent-primary); box-shadow: 0 0 8px rgba(var(--vyuka-accent-primary-rgb), 0.3); transform: scale(1.1); }

/* --- Vylepšení Tlačítek --- */
.btn {
    border-radius: var(--vyuka-button-radius);
    font-family: var(--vyuka-font-accent); /* Cyberpunk font pro tlačítka */
    text-shadow: 0 0 2px var(--vyuka-accent-primary), 0 0 5px var(--vyuka-accent-primary);
    border: 1px solid var(--vyuka-accent-primary);
    background: radial-gradient(ellipse at center, rgba(var(--vyuka-accent-primary-rgb),0.2) 0%, transparent 70%);
    box-shadow: 0 0 8px var(--vyuka-accent-primary), inset 0 0 5px rgba(var(--vyuka-accent-primary-rgb),0.3);
    transition: all var(--animation-duration-fast) ease-in-out;
}
.btn::before { display: none; } /* Odstranění původního gradientu před */
.btn:hover:not(:disabled) {
    color: var(--vyuka-bg-dark);
    background: var(--vyuka-accent-primary);
    text-shadow: 0 0 3px var(--vyuka-bg-dark);
    box-shadow: 0 0 15px var(--vyuka-accent-primary), 0 0 25px var(--vyuka-accent-primary), inset 0 0 8px rgba(var(--vyuka-bg-dark),0.4);
    transform: translateY(-2px) scale(1.03);
}
.btn.btn-secondary {
    border-color: var(--vyuka-accent-secondary);
    color: var(--vyuka-accent-secondary);
    text-shadow: 0 0 2px var(--vyuka-accent-secondary), 0 0 5px var(--vyuka-accent-secondary);
    background: radial-gradient(ellipse at center, rgba(var(--vyuka-accent-secondary-rgb),0.15) 0%, transparent 70%);
    box-shadow: 0 0 8px var(--vyuka-accent-secondary), inset 0 0 5px rgba(var(--vyuka-accent-secondary-rgb),0.2);
}
.btn.btn-secondary:hover:not(:disabled) {
    color: var(--vyuka-bg-dark); background: var(--vyuka-accent-secondary);
    text-shadow: 0 0 3px var(--vyuka-bg-dark);
    box-shadow: 0 0 15px var(--vyuka-accent-secondary), 0 0 25px var(--vyuka-accent-secondary), inset 0 0 8px rgba(var(--vyuka-bg-dark),0.4);
}
.btn.btn-warning { /* Pro stop speech */
    border-color: var(--vyuka-accent-pink); color: var(--vyuka-accent-pink);
    text-shadow: 0 0 2px var(--vyuka-accent-pink), 0 0 5px var(--vyuka-accent-pink);
    background: radial-gradient(ellipse at center, rgba(var(--vyuka-accent-pink-rgb),0.15) 0%, transparent 70%);
    box-shadow: 0 0 8px var(--vyuka-accent-pink), inset 0 0 5px rgba(var(--vyuka-accent-pink-rgb),0.2);
}
.btn.btn-warning:hover:not(:disabled) {
    color: var(--vyuka-bg-dark); background: var(--vyuka-accent-pink);
    text-shadow: 0 0 3px var(--vyuka-bg-dark);
    box-shadow: 0 0 15px var(--vyuka-accent-pink), 0 0 25px var(--vyuka-accent-pink), inset 0 0 8px rgba(var(--vyuka-bg-dark),0.4);
}

/* --- Vylepšení Notifikací (Toasty) --- */
.toast {
    border-radius: var(--vyuka-card-radius);
    background: var(--vyuka-bg-panel-translucent);
    backdrop-filter: blur(10px);
    border: 1px solid var(--vyuka-border-glow-soft);
    box-shadow: 0 0 15px var(--vyuka-border-glow-hard), inset 0 0 5px rgba(var(--vyuka-bg-dark),0.5);
    animation: toast-glitch-in 0.5s var(--animation-timing-cyber) forwards;
}
@keyframes toast-glitch-in {
  0% { opacity: 0; transform: translateX(120%) skewX(-20deg); }
  60% { transform: translateX(-10%) skewX(10deg); }
  80% { transform: translateX(5%) skewX(-5deg); }
  100% { opacity: 1; transform: translateX(0) skewX(0); }
}
.toast.success { border-left-color: var(--vyuka-accent-lime); box-shadow: 0 0 15px rgba(var(--vyuka-accent-lime-rgb),0.5), inset 0 0 5px rgba(var(--vyuka-bg-dark),0.5); }
.toast.error { border-left-color: var(--vyuka-accent-error); box-shadow: 0 0 15px rgba(var(--vyuka-accent-error-rgb),0.5), inset 0 0 5px rgba(var(--vyuka-bg-dark),0.5); }
.toast-title { font-family: var(--vyuka-font-accent); text-shadow: var(--vyuka-text-glow-secondary); }

/* --- Vylepšený Footer --- */
.vyuka-footer {
    flex-shrink: 0;
    background: linear-gradient(to top, var(--vyuka-bg-dark) 0%, var(--vyuka-bg-panel) 100%);
    border-top: 1px solid var(--vyuka-border-glow-hard);
    padding: 1.5rem 0;
    box-shadow: 0 -5px 20px rgba(var(--vyuka-accent-primary-rgb),0.1);
    position: relative;
    z-index: 5; /* Aby byl nad main-content::before gridem */
}
.vyuka-footer::before { /* Horní svítící linka */
    content:''; position:absolute; top: -1px; left:0; width:100%; height:2px;
    background: linear-gradient(90deg, transparent, var(--vyuka-accent-primary), var(--vyuka-accent-secondary), var(--vyuka-accent-primary), transparent);
    background-size: 300% 100%;
    animation: footer-border-scan 12s linear infinite;
    box-shadow: 0 0 5px var(--vyuka-accent-primary), 0 0 10px var(--vyuka-accent-secondary);
    filter: blur(0.5px);
}
@keyframes footer-border-scan { 0% {background-position: 150% 50%;} 100% {background-position: -150% 50%;} }
.vyuka-footer .footer-links a:hover { text-shadow: var(--vyuka-text-glow-secondary); color: var(--vyuka-accent-secondary); }
.vyuka-footer .social-links a:hover { background-color: var(--vyuka-accent-primary); color: var(--vyuka-bg-dark); transform: translateY(-3px) scale(1.1); box-shadow: 0 0 10px var(--vyuka-accent-primary); }

/* Responzivita - zachovány předchozí úpravy, mohou potřebovat doladění */
@media (max-width: 1200px) {
    .vyuka-main-content { flex-direction: column; overflow-y: auto; }
    .vyuka-whiteboard-area, .vyuka-chat-panel { flex: none; width: 100%; height: auto; min-height: 60vh; /* Ještě vyšší min-height */ }
    .vyuka-chat-panel { max-height: none; }
}
@media (max-width: 992px) {
    .vyuka-sidebar-ai { width: var(--vyuka-sidebar-width-collapsed); }
    .vyuka-sidebar-ai.expanded { width: var(--vyuka-sidebar-width-expanded); box-shadow: 0 0 20px rgba(0,0,0,0.3); }
     .vyuka-sidebar-ai:not(.expanded) .vyuka-sidebar-ai-logo .logo-text,
     .vyuka-sidebar-ai:not(.expanded) .vyuka-sidebar-ai-link .link-text { display: none; }
     .vyuka-sidebar-ai:not(.expanded) .vyuka-sidebar-ai-link i,
     .vyuka-sidebar-ai:not(.expanded) .vyuka-sidebar-ai-logo i { margin-right: 0; }
    .vyuka-sidebar-ai:not(.expanded) .vyuka-sidebar-ai-header,
    .vyuka-sidebar-ai:not(.expanded) .vyuka-sidebar-ai-link { justify-content: center; }
    .vyuka-page-container { margin-left: var(--vyuka-sidebar-width-collapsed); }
    .vyuka-sidebar-ai.expanded ~ .vyuka-page-container { margin-left: var(--vyuka-sidebar-width-expanded); }
    .vyuka-header-left .sidebar-ai-desktop-toggle { display: block; }
    .vyuka-header-left .mobile-menu-toggle { display: none; }
    .vyuka-header-user-display { display: none; }
}
@media (max-width: 768px) {
    .vyuka-sidebar-ai { transform: translateX(-100%); width: var(--vyuka-sidebar-width-expanded); z-index: 1002; }
    .vyuka-sidebar-ai.active-mobile { transform: translateX(0); }
    .vyuka-sidebar-ai.active-mobile .vyuka-sidebar-ai-logo .logo-text,
    .vyuka-sidebar-ai.active-mobile .vyuka-sidebar-ai-link .link-text { display: inline; }
     .vyuka-sidebar-ai.active-mobile .vyuka-sidebar-ai-link i { margin-right: 0.8rem; }
    .vyuka-sidebar-ai.active-mobile .vyuka-sidebar-ai-header,
    .vyuka-sidebar-ai.active-mobile .vyuka-sidebar-ai-link { justify-content: flex-start; }
    .vyuka-page-container { margin-left: 0; width: 100%; }
    .vyuka-header { padding: 0 0.8rem; }
    .vyuka-header-left .sidebar-ai-desktop-toggle { display: none; }
    .vyuka-header-left .mobile-menu-toggle { display: block; }
    .vyuka-header-topic-info h1 { font-size: 0.9rem; }
    .vyuka-header-topic-info p { font-size: 0.7rem; }
    .vyuka-header-right .btn-exit-vyuka span { display: none; }
    .vyuka-header-right .btn-exit-vyuka i { margin-right: 0; }
    .vyuka-header-right { gap: 0.3rem; }
    .vyuka-main-content { padding: 0.8rem; gap: 0.8rem; min-height: calc(100vh - var(--vyuka-header-height) - var(--vyuka-footer-height) - 1.6rem); }
    .vyuka-whiteboard-area, .vyuka-chat-panel { padding: 0.8rem; min-height: 40vh; }
    .vyuka-chat-panel { max-height: 50vh; }
    .vyuka-lesson-controls { flex-direction: column; }
    .vyuka-lesson-controls .btn { width: 100%; font-size: 0.75rem; padding: 0.4rem; }
    .chat-input-area { padding-top: 0.5rem; }
    .chat-input { padding: 0.4rem; font-size: 0.7rem; }
    .send-button { width: 30px; height: 30px; font-size: 0.8rem;}
    .chat-controls button { width: 26px; height: 26px; font-size: 0.7rem;}
    .sidebar-overlay-ai { position: fixed; inset: 0; background-color: rgba(var(--vyuka-bg-dark), 0.8); z-index: 1001; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0s 0.3s; backdrop-filter: blur(4px); }
    .sidebar-overlay-ai.active { opacity: 1; visibility: visible; transition-delay: 0s; }
    .vyuka-footer .footer-grid {flex-direction: column; align-items: center; gap: 0.5rem;}
    .vyuka-footer .footer-column {margin-bottom: 0.5rem;}
    .vyuka-header-user-display { max-width: 80px; }
    .vyuka-header-user-title { display:none;}
}