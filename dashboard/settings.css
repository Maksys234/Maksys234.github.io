/* dashboard/settings.css */
/* Версия: 28.5.4 - Fix layout shift on avatar load by adding aspect-ratio. */

:root {
    /* Основа */
    --vyuka-font-primary: 'Rajdhani', sans-serif;
    --vyuka-font-accent: 'Audiowide', cursive;
    --vyuka-font-secondary: 'Orbitron', sans-serif;

    --bg-color: #03020c;
    --bg-secondary: #0a071f;
    --bg-secondary-rgb: 10, 7, 31;
    --card-bg: rgba(15, 10, 45, 0.88);
    --card-solid: #0f0a2d;
    --card-solid-rgb: 15, 10, 55;
    --interface-bg: rgba(6, 4, 22, 0.92);
    --interface-border: rgba(0, 240, 255, 0.35);
    --dark-purple-accent: #160c41;
	--dark-purple-accent-rgb: 22, 12, 65;

    /* Акценты */
    --accent-primary: #00e0ff;
    --accent-primary-rgb: 0, 224, 255;
    --accent-secondary: #a05cff;
    --accent-secondary-rgb: 160, 92, 255;
    --accent-pink: #ff33a8;
    --accent-pink-rgb: 255, 51, 168;
    --accent-lime: #6fff3a;
	--accent-lime-rgb: 111, 255, 58;
    --accent-orange: #f8961e;
	--accent-orange-rgb: 248, 150, 30;
    --accent-cyan: var(--accent-primary);
    --accent-cyan-rgb: var(--accent-primary-rgb);
    --accent-cyan-glow: rgba(var(--accent-cyan-rgb), 0.6);
    --accent-glow: rgba(var(--accent-primary-rgb), 0.6);
    --accent-secondary-glow: rgba(var(--accent-secondary-rgb), 0.5);
	--accent-pink-glow: rgba(var(--accent-pink-rgb), 0.4);
	--accent-lime-glow: rgba(var(--accent-lime-rgb), 0.5);
	--accent-orange-glow: rgba(var(--accent-orange-rgb), 0.5);
    --accent-border-glow: rgba(var(--accent-primary-rgb), 0.7);

    /* Текст */
    --text-light: #f1f5f9;
    --text-medium: #b8c4e0;
    --text-muted: #808db0;
	--text-muted-rgb: 128, 141, 176;
    --text-heading: #ffffff;
    --text-link: var(--accent-primary);
    --text-link-hover: #ffffff;
    --text-fixed-dark: #03020c;
	--white: #ffffff;
	--white-rgb: 255,255,255;
    --black: #000000;

    /* Границы */
    --border-color-light: rgba(var(--accent-secondary-rgb), 0.25);
    --border-color-medium: rgba(var(--accent-secondary-rgb), 0.45);
    --border-color-strong: rgba(var(--accent-primary-rgb), 0.65);
	--border-interactive: var(--accent-primary);
    --border-anim-gradient: linear-gradient(90deg, var(--accent-secondary), var(--accent-primary), var(--accent-pink), var(--accent-secondary));
    --border-glow-gradient: linear-gradient(90deg, transparent, var(--accent-primary), var(--accent-pink), var(--accent-primary), transparent);


    /* Градиенты */
    --gradient-header: linear-gradient(180deg, rgba(3, 2, 12, 0.97) 0%, rgba(3, 2, 12, 0.9) 100%);
    --gradient-button: linear-gradient(100deg, var(--accent-secondary) 0%, var(--accent-primary) 100%);
    --gradient-button-hover: linear-gradient(100deg, var(--accent-primary) 0%, var(--accent-pink) 100%);
    --gradient-profile-avatar: linear-gradient(145deg, var(--accent-primary), var(--accent-secondary));
    --gradient-exp-bar: linear-gradient(90deg, var(--accent-secondary) 0%, var(--accent-primary) 50%, var(--accent-cyan) 100%);
    --gradient-hero-bg: radial-gradient(ellipse at 15% 15%, rgba(var(--accent-primary-rgb), 0.18), transparent 55%),
                        radial-gradient(ellipse at 85% 85%, rgba(var(--accent-secondary-rgb), 0.15), transparent 60%),
                        var(--bg-color);
    --gradient-card-highlight: linear-gradient(160deg, rgba(var(--accent-primary-rgb), 0.15), rgba(var(--accent-secondary-rgb), 0.12));
    --gradient-cta: linear-gradient(110deg, var(--accent-secondary) 0%, var(--accent-pink) 100%);
    --shimmer-gradient: linear-gradient(90deg, transparent, rgba(var(--accent-primary-rgb), 0.2), transparent);
    --gradient-sidebar: linear-gradient(190deg, var(--bg-secondary) 0%, var(--dark-purple-accent) 100%);
    --gradient-level-up: linear-gradient(45deg, var(--accent-pink), var(--accent-secondary));
    --gradient-welcome: linear-gradient(135deg, rgba(var(--accent-primary-rgb), 0.12), rgba(var(--accent-secondary-rgb), 0.18));
    --gradient-exp-bar-alt: linear-gradient(90deg, #ff33a8 0%, #a05cff 50%, #00e0ff 100%);


    /* Шрифты */
    --font-primary: 'Inter', sans-serif;
    --font-secondary: 'Poppins', sans-serif;
    --font-mono: 'Roboto Mono', monospace;

    /* Тени */
    --shadow-glow: 0 0 25px var(--accent-glow);
    --shadow-card: 0 12px 40px rgba(0, 0, 0, 0.4);
    --shadow-interactive: 0 8px 20px rgba(var(--accent-primary-rgb), 0.4);
    --shadow-interactive-hover: 0 10px 28px rgba(var(--accent-pink-rgb), 0.45);
    --shadow-card-hover-enhanced: 0 18px 50px rgba(0, 0, 0, 0.45), 0 0 30px var(--accent-glow), inset 0 0 15px rgba(var(--accent-primary-rgb), 0.15);
    --shadow-hud: 0 4px 15px rgba(0,0,0,0.3), inset 0 1px 2px rgba(var(--accent-primary-rgb), 0.1);
    --shadow-text-glow: 0 0 8px rgba(var(--accent-primary-rgb), 0.6);
    --shadow-sm: 0 2px 4px rgba(0,0,0,0.2);


    --card-radius: 14px;
    --button-radius: 10px;
    --form-element-radius: 8px;
    --section-padding-y: clamp(1.5rem, 4vh, 2rem);
    --container-padding-x: clamp(1rem, 3vw, 2rem);

    --input-bg-color: rgba(var(--accent-secondary-rgb), 0.08);
    --input-border-color: var(--border-color-light);
    --input-focus-border-color: var(--accent-primary);
    --input-focus-shadow: 0 0 0 3px rgba(var(--accent-primary-rgb), 0.25);

    /* Proměnné pro vyuka-style layout */
    --vyuka-sidebar-width-expanded: 250px;
    --vyuka-sidebar-width-collapsed: 68px;
    --vyuka-header-height: 64px;
    --vyuka-bg-panel: #0D101B;
	--vyuka-bg-panel-rgb: 13, 16, 27;
    --vyuka-border-color: #2C334C;
    --vyuka-text-primary: #E0E7FF;
    --vyuka-text-secondary: #A0AEC0;
    --vyuka-text-muted: #5A6788;
    --vyuka-accent-primary: #FF00E6; /* Magenta from vyuka */
    --vyuka-accent-primary-rgb: 255, 0, 230;
    --vyuka-accent-secondary: #00F5FF; /* Cyan from vyuka */
	--vyuka-accent-secondary-rgb: 0, 245, 255;
    --vyuka-accent-error: #FF4757; /* Red from vyuka */
    --vyuka-text-on-accent: var(--bg-color);
    --vyuka-text-glow-secondary: 0 0 6px var(--vyuka-accent-secondary), 0 0 12px var(--vyuka-accent-secondary);
    --vyuka-border-highlight: rgba(var(--vyuka-accent-secondary-rgb), 0.5);
    --vyuka-card-radius: 8px;
    --vyuka-bg-dark: #05080F; /* Added from vyuka.css as it's used by body.new-vyuka-layout */
    --vyuka-bg-dark-rgb: 5, 8, 15;
    --vyuka-bg-panel-lighter: #131724;
    --vyuka-bg-panel-lighter-rgb: 19, 23, 36;
    --vyuka-text-link: var(--vyuka-accent-secondary);
    --vyuka-text-link-hover: var(--vyuka-text-primary);
    --vyuka-button-radius: 6px;
    --vyuka-input-radius: 6px;
    --vyuka-panel-shadow: 0 5px 20px rgba(0,0,0,0.5), inset 0 0 12px rgba(var(--vyuka-bg-dark-rgb),0.7);
    --vyuka-cyber-glow-primary: 0 0 12px rgba(var(--vyuka-accent-primary-rgb), 0.6), 0 0 24px rgba(var(--vyuka-accent-primary-rgb), 0.4);
    --vyuka-cyber-glow-secondary: 0 0 12px rgba(var(--vyuka-accent-secondary-rgb), 0.6), 0 0 24px rgba(var(--vyuka-accent-secondary-rgb), 0.4);
    --vyuka-main-content-padding: 2rem;
    --vyuka-main-content-gap: 2rem;
    --vyuka-footer-current-approx-height: 85px;


    --transition-fast: all 0.2s ease-out;
    --transition-medium: all 0.35s ease-out;
    --animation-duration-fast: 0.2s;
    --animation-timing-cyber: cubic-bezier(0.19, 1, 0.22, 1);

    /* Notification colors from vyuka.css */
    --vyuka-notification-bg: rgba(var(--vyuka-bg-panel-rgb), 0.97);
    --vyuka-notification-border: var(--vyuka-border-highlight);
    --vyuka-notification-shadow: 0 10px 30px rgba(0,0,0,0.6), 0 0 15px rgba(var(--vyuka-accent-primary-rgb),0.2) inset;
    --vyuka-notification-item-hover-bg: rgba(var(--vyuka-accent-secondary-rgb), 0.1);
    --vyuka-notification-unread-dot: var(--vyuka-accent-primary);
    --vyuka-notification-hide-duration: 0.4s;

    /* Loader vars from vyuka.css */
    --vyuka-loader-size: 80px;
    --vyuka-loader-blade-color: var(--vyuka-accent-primary);
    --vyuka-loader-core-color: var(--vyuka-accent-secondary);
    --vyuka-loader-bg-color: rgba(var(--vyuka-bg-dark-rgb), 0.98);

    /* Skeleton Loader Colors (from dashboard.css, ensuring consistency) */
    --skeleton-bg: rgba(var(--accent-secondary-rgb), 0.1);
    --skeleton-highlight: rgba(var(--accent-secondary-rgb), 0.2);

    /* Toast & Offline from profile.css (vyuka.css has similar, this is fine) */
    --toast-container-bottom: 1.5rem;
    --toast-container-right: 1.5rem;
    --toast-max-width: 380px;
    --toast-padding: 1rem 1.3rem;
    --toast-border-radius: 12px;
    --toast-border-left-width: 5px;

    /* Danger zone from profile.css */
    --danger-zone-bg: rgba(var(--accent-pink-rgb), 0.05);
    --danger-zone-border: rgba(var(--accent-pink-rgb), 0.3);
    --danger-zone-title-color: var(--accent-pink);
    --danger-zone-text-shadow: 0 0 8px var(--accent-pink-glow);
}

/* --- Základní styly stránky (z vyuka.css) --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; font-size: 16px; -webkit-text-size-adjust: 100%; height: 100%; overflow-x: hidden; }
body.new-vyuka-layout {
    font-family: var(--font-primary);
    background-color: var(--vyuka-bg-dark);
    color: var(--vyuka-text-primary);
    margin: 0; padding: 0; display: flex;
    min-height: 100%;
    position: relative;
}
body.new-vyuka-layout::before, body.new-vyuka-layout::after {
    content: ''; position: fixed; inset: 0; z-index: -2;
    background-image: linear-gradient(rgba(var(--vyuka-border-color), 0.07) 1px, transparent 1px), linear-gradient(90deg, rgba(var(--vyuka-border-color), 0.07) 1px, transparent 1px);
    background-size: 30px 30px; opacity: 0.5; animation: bg-grid-pan 120s linear infinite; pointer-events:none;
}
body.new-vyuka-layout::after {
    z-index: -1;
    background: linear-gradient(to bottom, transparent 50%, rgba(var(--vyuka-bg-dark-rgb), 0.1) 50%), radial-gradient(ellipse at center, rgba(var(--vyuka-accent-primary-rgb),0.03) 0%, transparent 70%);
    background-size: 100% 3px, 100% 100%; opacity: 0.2; animation: scanlines 20s linear infinite alternate; pointer-events:none;
}
@keyframes bg-grid-pan { 0% { background-position: 0 0; } 100% { background-position: 600px 300px; } }
@keyframes scanlines { from { background-position: 0 0, 0 0; } to { background-position: 0 60px, 0 0; } }

h1, h2, h3, h4, h5, h6 { font-family: var(--vyuka-font-secondary); color: var(--vyuka-text-heading); text-shadow: 0 0 8px rgba(var(--vyuka-accent-secondary-rgb),0.3); margin:0; }
a { color: var(--vyuka-text-link); text-decoration: none; transition: color var(--animation-duration-fast) ease, text-shadow var(--animation-duration-fast) ease; }
a:hover { color: var(--vyuka-text-link-hover); text-shadow: 0 0 10px var(--vyuka-text-link-hover); }
a:focus-visible, button:focus-visible, input:focus-visible, textarea:focus-visible, select:focus-visible { outline: 3px solid var(--vyuka-accent-secondary); outline-offset: 3px; border-radius: 4px; box-shadow: 0 0 12px var(--vyuka-accent-secondary); }
:is(a, button, input, textarea, select):focus { outline: none; }

/* --- Styly pro layout s .vyuka-sidebar-ai --- */
.vyuka-page-container {
    flex-grow: 1;
    margin-left: var(--vyuka-sidebar-width-collapsed);
    display: flex;
    flex-direction: column;
    height: 100vh;
    transition: margin-left 0.3s var(--animation-timing-cyber);
    overflow: hidden;
    background-color: var(--vyuka-bg-dark);
}
.vyuka-sidebar-ai.expanded ~ .vyuka-page-container {
    margin-left: var(--vyuka-sidebar-width-expanded);
}

.vyuka-main-content-scrollable {
    flex-grow: 1;
    overflow-y: auto;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    position: relative;
}
.vyuka-main-content-scrollable::-webkit-scrollbar { width: 8px; }
.vyuka-main-content-scrollable::-webkit-scrollbar-track { background: rgba(var(--vyuka-bg-dark-rgb), 0.1); }
.vyuka-main-content-scrollable::-webkit-scrollbar-thumb { background-color: var(--vyuka-accent-primary); border-radius: 4px; }


/* Header (vyuka-style) */
.vyuka-header {
    height: var(--vyuka-header-height);
    background-color: var(--vyuka-bg-panel);
    border-bottom: 1px solid var(--vyuka-border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 1.2rem;
    flex-shrink: 0;
    box-shadow: 0 3px 15px rgba(0,0,0,0.3), inset 0 -1px 0 rgba(var(--vyuka-border-color),0.5);
    position: sticky;
    top: 0;
    z-index: 950;
}
body.scrolled .vyuka-header {
    background-color: rgba(var(--vyuka-bg-panel-rgb), 0.95);
    box-shadow: 0 5px 20px rgba(0,0,0,0.4), 0 0 15px rgba(var(--vyuka-accent-primary-rgb), 0.1) inset;
}
.vyuka-header-left { display: flex; align-items: center; gap: 0.8rem; }
.vyuka-header-left .mobile-menu-toggle { display: none; color: var(--vyuka-text-muted); font-size: 1.4rem; background: none; border: none; cursor: pointer; padding: 0.5rem;}
.vyuka-header-left .sidebar-ai-desktop-toggle {
    color: var(--vyuka-text-muted); font-size: 1.1rem;
    background: rgba(var(--vyuka-bg-panel-lighter),0.7);
    border: 1px solid var(--vyuka-border-color);
    cursor: pointer; padding: 0.5rem 0.7rem; border-radius: var(--vyuka-button-radius);
    transition: all var(--animation-duration-fast) ease;
}
.vyuka-header-left .sidebar-ai-desktop-toggle:hover {
    background-color: rgba(var(--vyuka-accent-secondary-rgb),0.2);
    color: var(--vyuka-accent-secondary);
    border-color: var(--vyuka-accent-secondary);
    box-shadow: 0 0 8px rgba(var(--vyuka-accent-secondary-rgb),0.3);
}
.vyuka-header-left .sidebar-ai-desktop-toggle i { transition: transform 0.3s var(--animation-timing-cyber); }
.vyuka-sidebar-ai.expanded ~ .vyuka-page-container .vyuka-header .sidebar-ai-desktop-toggle i {
    transform: rotate(180deg);
}

/* Page Title in Header - Reusing dashboard.css styles */
.vyuka-header-page-title-container h1 {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-heading);
    margin: 0;
    text-shadow: 0 0 10px var(--accent-glow);
    display: flex;
    align-items: center;
    gap: 0.7rem;
}
.vyuka-header-page-title-container h1 i {
    font-size: 1.1em;
    color: var(--accent-primary);
    text-shadow: none;
}
.vyuka-header-page-title-container p { /* Subtitle */
    font-size: 0.85rem;
    margin: 0;
    color: var(--vyuka-text-secondary);
    font-family: var(--vyuka-font-mono);
}


.vyuka-header-right { display: flex; align-items: center; gap: 0.8rem; }

/* User Display in Header (vyuka-style) - UPRAVENO */
.vyuka-header-user-display { display: flex; align-items: center; gap: 0.8rem; padding: 0.35rem 0.7rem; background-color: rgba(var(--vyuka-bg-panel-lighter), 0.6); border-radius: var(--vyuka-button-radius); border: 1px solid var(--vyuka-border-color); cursor: pointer; transition: background-color 0.2s ease, box-shadow 0.2s ease; }
.vyuka-header-user-display:hover { background-color: rgba(var(--vyuka-accent-primary-rgb), 0.15); box-shadow: 0 0 12px rgba(var(--vyuka-accent-primary-rgb), 0.25); }
/* Avatar v headeru - Převzato z profile.js integrace */
.vyuka-header-user-avatar-wrapper {
    width: 36px; height: 36px;
    min-width: 36px; max-width: 36px;
    min-height: 36px; max-height: 36px;
    border-radius: 50%; overflow: hidden;
    border: 2px solid var(--vyuka-accent-secondary);
    box-shadow: 0 0 10px rgba(var(--vyuka-accent-secondary-rgb),0.5);
    flex-shrink: 0;
    position: relative;
    display: flex; align-items: center; justify-content: center;
    background-color: var(--dark-purple-accent);
    aspect-ratio: 1 / 1; /* NEW: Fix layout shift */
}
.vyuka-header-avatar-img {
    width: 100% !important; height: 100% !important; object-fit: cover !important;
    display: block !important; position: static !important;
    max-width: 100% !important; max-height: 100%; border-radius: 0 !important;
}
.vyuka-header-user-avatar-wrapper span {
    font-size: 1rem; font-weight: 600; color: var(--vyuka-text-primary);
}
.vyuka-header-user-details { display: flex; flex-direction: column; align-items: flex-start; line-height: 1.2; overflow: hidden;}
.vyuka-header-user-name { font-size: 0.9rem; font-weight: 600; color: var(--vyuka-text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 150px; }
.vyuka-header-user-title { font-size: 0.75rem; color: var(--vyuka-accent-secondary); font-family: var(--vyuka-font-mono); text-shadow: 0 0 3px var(--vyuka-accent-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 150px; }

/* Logout a Notifications (vyuka-style) */
.user-menu-container { position: relative; }
.user-dropdown-menu { position: absolute; top: calc(100% + 12px); right: 0; background-color: var(--vyuka-bg-panel); border: 1px solid var(--vyuka-border-color); border-radius: var(--vyuka-card-radius); box-shadow: 0 8px 20px rgba(0,0,0,0.5), 0 0 0 1px var(--vyuka-border-highlight); z-index: 1100; width: 220px; opacity: 0; visibility: hidden; transform: translateY(10px) scale(0.95); transform-origin: top right; transition: opacity var(--animation-duration-medium) ease, transform var(--animation-duration-medium) var(--animation-timing-cyber), visibility 0s var(--animation-duration-medium); padding: 0.5rem 0; }
.user-menu-container:hover .user-dropdown-menu, .vyuka-header-user-display.active + .user-dropdown-menu { opacity: 1; visibility: visible; transform: translateY(0) scale(1); transition-delay: 0s; }
.user-dropdown-links { list-style: none; padding: 0; margin: 0 0 0.5rem 0; }
.user-dropdown-links li a { display: flex; align-items: center; gap: 0.75rem; padding: 0.6rem 1rem; font-size: 0.85rem; color: var(--vyuka-text-secondary); text-decoration: none; transition: background-color 0.2s ease, color 0.2s ease; }
.user-dropdown-links li a:hover { background-color: rgba(var(--vyuka-accent-secondary-rgb), 0.1); color: var(--vyuka-accent-secondary); }
.user-dropdown-links li a i { width: 16px; text-align: center; color: var(--vyuka-text-muted); }
.user-dropdown-links li a:hover i { color: var(--vyuka-accent-secondary); }
.logout-btn { display: block; width: calc(100% - 2rem); margin: 0.5rem 1rem; font-size: 0.8rem !important; padding: 0.5rem 0.8rem !important; text-align: center !important; }

.notifications { position: relative; }
.notification-bell i { font-size: 1.3rem; }

/* --- Hlavní obsahová oblast pro Nastavení --- */
main.vyuka-main-content#settings-main-area {
    display: block;
    flex-grow: 1;
    padding: 0;
    height: auto;
    overflow-y: visible;
    background-color: transparent;
    gap: 0;
}

.main-content-wrapper { padding: var(--section-padding-y) var(--container-padding-x); }
.main-content-grid { display: grid; gap: 2rem; }

.settings-main-area .section {
    background: var(--card-bg);
    border-radius: var(--card-radius);
    border: 1px solid var(--border-color-light);
    box-shadow: var(--shadow-hud);
    padding: clamp(1.5rem, 4vw, 2.5rem);
    margin-bottom: 2rem;
    position: relative;
    overflow:visible;
}
.settings-main-area .section::before, .settings-main-area .section::after { content: ''; position: absolute; width: 12px; height: 12px; border-color: var(--accent-primary); border-style: solid; opacity: 0.6; transition: all 0.3s ease; pointer-events: none; z-index: 1; }
.settings-main-area .section::before { top: 10px; left: 10px; border-width: 2px 0 0 2px; }
.settings-main-area .section::after { bottom: 10px; right: 10px; border-width: 0 2px 2px 0; }

.settings-main-area .section-title {
    font-size: 1.5rem; font-weight: 600; margin-bottom: 1.5rem; color: var(--text-heading);
    padding-bottom: 0.8rem; position: relative;
    display: flex; align-items: center; gap: 0.7rem;
    border-bottom: 1px solid var(--border-color-light);
}
.settings-main-area .section-title i { font-size: 1.1em; color: var(--accent-secondary); text-shadow: 0 0 8px var(--accent-secondary-glow); }
.settings-main-area .section-title::after {
    content: ''; position: absolute; bottom: -1px; left: 0; width: 60px; height: 3px;
    background: var(--border-anim-gradient); background-size: 300% 100%;
    animation: gradient-move-settings 4s linear infinite; border-radius: 1.5px;
    filter: drop-shadow(0 0 5px var(--accent-primary));
}
@keyframes gradient-move-settings { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }

.settings-main-area .tab-content .section-title { border-bottom: none; padding-bottom: 0; margin-bottom: 1.5rem; }
.settings-main-area .tab-content .section-title::after { display: none; }

.settings-main-area .profile-header { display: flex; flex-direction: column; align-items: center; text-align: center; margin-bottom: 1.5rem; }
.settings-main-area .profile-avatar-level-container { display: flex; flex-direction: column; align-items: center; gap: 1rem; width: 100%; margin-bottom: 1.5rem; }
.settings-main-area .profile-avatar {
    width: 160px;
    height: 160px;
    aspect-ratio: 1 / 1; /* NEW: Fix layout shift */
    border-radius: 50%;
    background: var(--gradient-profile-avatar);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 4rem;
    color: var(--white);
    flex-shrink: 0;
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 30px rgba(var(--accent-primary-rgb), 0.35), 0 0 20px rgba(var(--accent-secondary-rgb), 0.25);
    cursor: pointer;
    border: 5px solid var(--card-bg);
    transition: transform var(--transition-medium), box-shadow var(--transition-medium);
}
.settings-main-area .profile-avatar:hover { transform: scale(1.05) rotate(-3deg); box-shadow: 0 0 40px rgba(var(--accent-primary-rgb), 0.45), 0 0 28px rgba(var(--accent-secondary-rgb), 0.35); }
.settings-main-area .profile-avatar img { width: 100%; height: 100%; object-fit: cover; }
.settings-main-area .profile-avatar .edit-avatar-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(var(--vyuka-bg-dark-rgb), 0.8); backdrop-filter: blur(4px); color: var(--vyuka-accent-primary); display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease; }
.settings-main-area .profile-avatar:hover .edit-avatar-overlay { opacity: 1; }
.settings-main-area .edit-avatar-overlay i { font-size: 1.8rem; margin-bottom: 0.4rem; text-shadow: 0 0 6px var(--vyuka-accent-primary); }
.settings-main-area .edit-avatar-overlay span { font-size: 0.9rem; font-weight: 500; text-transform: uppercase; letter-spacing: 1px; }

/* ... (the rest of the file is identical to the previous version) ... */