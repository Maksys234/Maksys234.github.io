<!DOCTYPE html>
<html lang="cs" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground - Testování Funkcí</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="stylesheet" href="../dashboard.css">
    
    <style>
        body.playground-active { display: flex; padding-top: 0; } /* Přizpůsobení pro playground */
        main#main-content { padding-top: 0; display: flex; flex-direction: column; height: 100vh; }
        .main-content-wrapper { flex-grow: 1; overflow-y: auto; }

        .auth-container { width: 100%; max-width: 450px; margin: 4rem auto; padding: 2.5rem; background-color: var(--card-bg); border-radius: var(--card-radius); border: 1px solid var(--border-color-medium); box-shadow: var(--shadow-card); }
        .auth-container h2 { text-align: center; color: var(--accent-primary); margin-bottom: 1.5rem; font-family: 'Orbitron', sans-serif; }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; font-weight: 500; margin-bottom: 0.5rem; color: var(--text-medium); }
        .form-group input { width: 100%; padding: 0.8rem 1rem; background-color: var(--interface-bg); border: 1px solid var(--border-color-light); border-radius: var(--button-radius); color: var(--text-light); font-family: var(--font-primary); font-size: 0.95rem; }
        .form-group input:focus { border-color: var(--accent-primary); box-shadow: 0 0 8px rgba(var(--accent-primary-rgb),0.2); }
        .auth-toggle { color: var(--text-link); font-size: 0.9rem; text-align: center; margin-top: 1rem; cursor: pointer; }
        .auth-toggle:hover { text-decoration: underline; }
        .hidden { display: none !important; }
        
        .user-info-display { background-color: rgba(var(--accent-primary-rgb), 0.08); border: 1px solid var(--border-color-medium); padding: 1rem 1.5rem; margin-bottom: 1.5rem; border-radius: var(--card-radius); display: flex; flex-direction:column; gap: 0.5rem; color: var(--text-medium); }
        .user-info-display strong { color: var(--text-light); }
        .user-info-display span { word-break: break-all;}

        .playground-section { margin-bottom: 2rem; padding: 1.5rem; background-color: var(--card-bg); border-radius: var(--card-radius); border: 1px solid var(--border-color-light); }
        .playground-section h2 { color: var(--accent-secondary); margin-top: 0; margin-bottom: 1.5rem; font-size: 1.3rem; border-bottom: 1px solid var(--border-color-medium); padding-bottom: 0.75rem;}
        .controls-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; }
        .control-group { display: flex; flex-direction: column; gap: 0.75rem; margin-bottom: 1rem; }
        .control-group label { font-size: 0.9rem; color: var(--text-medium); margin-bottom: 0.25rem; }
        .control-group input[type="number"], .control-group input[type="text"], .control-group select { width: 100%; padding: 0.6rem 0.8rem; background-color: var(--interface-bg); border: 1px solid var(--border-color-light); border-radius: var(--button-radius); color: var(--text-light); }
        .control-group button { margin-top: 0.5rem; }

        .toast-container { position: fixed; bottom: 1.5rem; right: 1.5rem; z-index: 1055; width: auto; max-width: 360px;}
        .toast { padding: 0.9rem 1.2rem; border-radius: 10px; background: var(--interface-bg); box-shadow: var(--shadow-card); display: flex; align-items: flex-start; color: var(--text-light); margin-bottom: 0.75rem; border-left: 5px solid var(--accent-primary); opacity: 0; transform: translateX(110%); transition: opacity 0.35s ease, transform 0.35s ease; }
        .toast.show { opacity: 1; transform: translateX(0); }
        .toast.success { border-left-color: var(--accent-lime); } .toast.error { border-left-color: var(--accent-pink); } .toast.info { border-left-color: var(--accent-cyan); }
        .toast .toast-icon { margin-right: 0.7rem; font-size: 1.2rem; flex-shrink: 0; margin-top: 1px; }
        .toast.success .toast-icon { color: var(--accent-lime); } .toast.error .toast-icon { color: var(--accent-pink); } .toast.info .toast-icon { color: var(--accent-cyan); }
        .toast .toast-message { font-size: 0.9rem; color: var(--text-medium); line-height: 1.45; }
        .toast .toast-close { background: none; border: none; cursor: pointer; color: var(--text-muted); font-size: 1.3rem; padding: 0.1rem; margin-left: auto; line-height: 1; opacity: 0.7;}
        .toast .toast-close:hover { opacity: 1; color: var(--accent-primary); }
        #initial-site-loader { position: fixed; inset:0; background-color: var(--bg-color); z-index: 9999; display:flex; flex-direction: column; align-items: center; justify-content: center; gap: 1rem; transition: opacity 0.5s ease-out;}
        #initial-site-loader .loading-spinner { width: 40px; height: 40px; border: 4px solid var(--accent-primary); border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;}
        #initial-site-loader p { color: var(--text-medium); font-weight: 500;}
        @keyframes spin { to { transform: rotate(360deg); }}
    </style>
</head>
<body class="dark playground-active">
    <div id="initial-site-loader">
        <div class="loading-spinner"></div>
        <p>Načítání Playgroundu...</p>
    </div>

    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <aside class="sidebar" id="sidebar" style="display:none;">
        <div class="sidebar-header">
            <button class="mobile-menu-toggle" id="sidebar-close-toggle" aria-label="Zavřít menu"><i class="fas fa-times"></i></button>
            <a href="playground.html" class="sidebar-logo"><i class="fas fa-flask"></i> <span>Playground</span></a>
        </div>
        <ul class="sidebar-menu">
            <li class="sidebar-item"> <a href="playground.html" class="sidebar-link active"> <i class="fas fa-gamepad"></i> <span>Playground</span> </a> </li>
            <li class="sidebar-item"> <a href="../dashboard.html" class="sidebar-link"> <i class="fas fa-tachometer-alt"></i> <span>Nástěnka</span> </a> </li>
            <li class="sidebar-item"> <a href="../procvicovani/main.html" class="sidebar-link"> <i class="fas fa-laptop-code"></i> <span>Procvičování</span> </a> </li>
            <li class="sidebar-item"> <a href="../pokrok.html" class="sidebar-link"> <i class="fas fa-chart-line"></i> <span>Pokrok</span> </a> </li>
            <li class="sidebar-item"> <a href="../oceneni.html" class="sidebar-link"> <i class="fas fa-medal"></i> <span>Ocenění</span> </a> </li>
            <li class="sidebar-item"> <a href="../profile.html" class="sidebar-link"> <i class="fas fa-user-astronaut"></i> <span>Profil</span> </a> </li>
        </ul>
        <div class="user-profile" id="user-profile-sidebar" data-profile-decoration="">
             <div class="avatar-wrapper" id="avatar-wrapper-sidebar" data-decoration-key="">
                 <div class="user-avatar" id="sidebar-avatar">?</div>
             </div>
            <div class="user-info">
                <div class="user-name" id="sidebar-name">Nepřihlášen</div>
                <div class="user-role" id="sidebar-user-title" title="Váš titul">Pilot</div>
            </div>
        </div>
        <div class="sidebar-footer"> &copy; <span id="currentYearSidebar"></span> Playground </div>
    </aside>

    <main id="main-content" style="display:none;">
        <header class="dashboard-header">
             <div class="header-content">
                 <div class="header-left-group">
                     <button class="btn btn-icon-only sidebar-toggle-btn" id="sidebar-toggle-btn-desktop" aria-label="Přepnout postranní panel" title="Přepnout postranní panel">
                         <i class="fas fa-chevron-left"></i>
                     </button>
                     <button class="mobile-menu-toggle" id="main-mobile-menu-toggle" aria-label="Otevřít menu">
                         <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="dashboard-title"><i class="fas fa-flask"></i> Playground</h1>
                 </div>
                 <div class="header-actions">
                     <button class="btn btn-danger" id="logoutButton" style="display:none;"><i class="fas fa-sign-out-alt"></i> Odhlásit</button>
                 </div>
             </div>
        </header>

        <div class="main-content-wrapper">
            <div id="authSection" class="auth-container">
                <div id="loginFormContainer">
                    <h2>Přihlášení do Playgroundu</h2>
                    <form id="loginForm">
                        <div class="form-group"><label for="login-email">Email:</label><input type="email" id="login-email" name="email" required placeholder="vas@email.cz"></div>
                        <div class="form-group"><label for="login-password">Heslo:</label><input type="password" id="login-password" name="password" required placeholder="********"></div>
                        <button type="submit" class="btn btn-primary" style="width:100%;">Přihlásit se</button>
                    </form>
                    <p class="auth-toggle" id="showRegister">Nemáte účet? Zaregistrujte se.</p>
                </div>
                <div id="registerFormContainer" class="hidden">
                    <h2>Registrace do Playgroundu</h2>
                    <form id="registerForm">
                        <div class="form-group"><label for="register-email">Email:</label><input type="email" id="register-email" name="email" required placeholder="vas@email.cz"></div>
                        <div class="form-group"><label for="register-password">Heslo:</label><input type="password" id="register-password" name="password" required placeholder="Minimálně 6 znaků"></div>
                        <button type="submit" class="btn btn-primary" style="width:100%;">Zaregistrovat se</button>
                    </form>
                    <p class="auth-toggle" id="showLogin">Máte již účet? Přihlaste se.</p>
                </div>
            </div>

            <div id="appContent" class="hidden">
                <div class="user-info-display">
                    <span>Přihlášen jako: <strong id="userEmailDisplay"></strong></span>
                    <span>ID: <strong id="userIdDisplay"></strong></span>
                    <span>Level: <strong id="userLevelDisplay"></strong></span>
                    <span>XP: <strong id="userXpDisplay"></strong></span>
                    <span>Kredity: <strong id="userPointsDisplay"></strong></span>
                    <span>Série: <strong id="userStreakDisplay"></strong></span>
                </div>
                
                <section class="playground-section">
                    <h2><i class="fas fa-user-cog"></i> Uživatelské Statistiky</h2>
                    <div class="controls-grid">
                        <div class="control-group">
                            <button class="btn btn-primary" id="increaseLevelBtn">Zvýšit Level o 1</button>
                        </div>
                        <div class="control-group">
                            <label for="addXpAmount">Přidat XP:</label>
                            <input type="number" id="addXpAmount" value="100">
                            <button class="btn btn-primary" id="addXpBtn">Přidat XP</button>
                        </div>
                        <div class="control-group">
                            <label for="addPointsAmount">Přidat Kredity:</label>
                            <input type="number" id="addPointsAmount" value="1000">
                            <button class="btn btn-primary" id="addPointsBtn">Přidat Kredity</button>
                        </div>
                         <div class="control-group">
                            <button class="btn btn-secondary" id="resetXpBtn">Resetovat XP pro aktuální level</button>
                        </div>
                        <div class="control-group">
                            <button class="btn btn-secondary" id="resetPointsBtn">Resetovat Kredity na 0</button>
                        </div>
                        <div class="control-group">
                            <label for="setStreakDays">Nastavit Sérii (dny):</label>
                            <input type="number" id="setStreakDays" value="7">
                            <button class="btn btn-primary" id="setStreakBtn">Nastavit Sérii</button>
                        </div>
                         <div class="control-group">
                            <button class="btn btn-secondary" id="syncDailyStreakBtn">Synchronizovat Denní Sérii (last_login)</button>
                        </div>
                    </div>
                </section>

                <section class="playground-section">
                    <h2><i class="fas fa-medal"></i> Odznaky</h2>
                    <div class="controls-grid">
                        <div class="control-group">
                            <label for="badgeSelect">Vybrat Odznak:</label>
                            <select id="badgeSelect"></select>
                            <button class="btn btn-primary" id="addBadgeBtn">Přidat Odznak</button>
                        </div>
                        <div class="control-group">
                            <button class="btn btn-danger" id="clearBadgesBtn">Vymazat Všechny Odznaky</button>
                        </div>
                    </div>
                </section>

                <section class="playground-section">
                    <h2><i class="fas fa-scroll"></i> Tituly</h2>
                     <div class="controls-grid">
                        <div class="control-group">
                            <label for="titleSelect">Vybrat Titul k Vyzbrojení:</label>
                            <select id="titleSelect"></select>
                            <button class="btn btn-primary" id="equipTitleBtn">Vyzbrojit Titul</button>
                        </div>
                         <div class="control-group">
                            <button class="btn btn-secondary" id="clearEquippedTitleBtn">Odstranit Vyzbrojený Titul</button>
                        </div>
                    </div>
                </section>

                <section class="playground-section">
                    <h2><i class="fas fa-user-astronaut"></i> Vylepšení Avatara & Profilu</h2>
                    <div class="controls-grid">
                        <div class="control-group">
                            <label for="avatarDecorationSelect">Dekorace Avataru (Rámeček):</label>
                            <select id="avatarDecorationSelect">
                                <option value="">Žádná</option>
                                <option value="avatar_frame_crown">Koruna</option>
                                <option value="avatar_frame_metal">Kov</option>
                                <option value="avatar_frame_ink">Inkoust</option>
                                <option value="avatar_frame_pirate">Pirát</option>
                                </select>
                            <button class="btn btn-primary" id="setAvatarDecorationBtn">Nastavit Dekoraci Avataru</button>
                        </div>
                        <div class="control-group">
                            <label for="profileDecorationSelect">Dekorace Profilu (Pozadí/Efekt):</label>
                            <select id="profileDecorationSelect">
                                <option value="">Žádná</option>
                                <option value="profile_animated_border">Pulzující Aura</option>
                                </select>
                            <button class="btn btn-primary" id="setProfileDecorationBtn">Nastavit Dekoraci Profilu</button>
                        </div>
                         <div class="control-group">
                            <button class="btn btn-primary" id="applyFallingStarsPlayground">Aplikovat "Kosmický Dešť" (Avatar)</button>
                        </div>
                        <div class="control-group">
                            <button class="btn btn-danger" id="removeAllDecorationsBtn">Odstranit Všechny Dekorace</button>
                        </div>
                    </div>
                </section>
                 <section class="playground-section">
                    <h2><i class="fas fa-bell"></i> Notifikace</h2>
                    <div class="controls-grid">
                        <div class="control-group">
                            <label for="notificationTitle">Titul Notifikace:</label>
                            <input type="text" id="notificationTitle" value="Testovací Notifikace">
                        </div>
                        <div class="control-group">
                            <label for="notificationMessage">Zpráva Notifikace:</label>
                            <input type="text" id="notificationMessage" value="Toto je testovací zpráva z Playgroundu.">
                        </div>
                        <div class="control-group">
                             <label for="notificationType">Typ Notifikace:</label>
                             <select id="notificationType">
                                 <option value="info">Info</option>
                                 <option value="success">Success</option>
                                 <option value="warning">Warning</option>
                                 <option value="danger">Danger</option>
                                 <option value="badge">Badge</option>
                                 <option value="level_up">Level Up</option>
                             </select>
                         </div>
                        <div class="control-group">
                            <label for="notificationIcon">Ikona (Font Awesome class):</label>
                            <input type="text" id="notificationIcon" value="fa-flask">
                        </div>
                        <div class="control-group">
                            <label for="notificationLink">Odkaz (nepovinné):</label>
                            <input type="text" id="notificationLink" placeholder="/dashboard/oceneni.html">
                        </div>
                        <div class="control-group">
                            <button class="btn btn-primary" id="sendTestNotificationBtn">Odeslat Testovací Notifikaci</button>
                        </div>
                    </div>
                </section>


            </div> </div>

        <footer class="dashboard-footer"><p>&copy; <span id="currentYearFooter"></span> Playground Systems</p></footer>
    </main>

    <div class="toast-container" id="toast-container"></div>
    <div id="mouse-follower" class="mouse-follower-glow"></div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="playground.js"></script>
</body>
</html>